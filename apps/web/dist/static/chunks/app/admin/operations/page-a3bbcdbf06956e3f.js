(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5841],{28490:(e,s,a)=>{"use strict";a.d(s,{j:()=>n});var t=a(95688),l=a(27100),r=a(56500);function n(e){let{tabs:s,activeTab:a,onTabChange:n,children:i,className:c}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("space-y-4",c),children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex space-x-8",children:s.map(e=>(0,t.jsxs)("button",{onClick:()=>n(e.id),className:(0,r.cn)("relative px-1 pb-4 text-sm font-medium transition-colors",a===e.id?"text-blue-600":"text-gray-500 hover:text-gray-700"),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon&&(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.label}),e.badge&&(0,t.jsx)("span",{className:"ml-2 rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:e.badge})]}),a===e.id&&(0,t.jsx)(l.P.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},e.id))})}),(0,t.jsx)("div",{className:"pt-4",children:i})]})}},32806:(e,s,a)=>{Promise.resolve().then(a.bind(a,43905))},43905:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var t=a(95688),l=a(27100),r=a(77346),n=a(54202),i=a(90789),c=a(26333),d=a(23740),o=a(96929),m=a(79155),x=a(52872),h=a(99124),u=a(97895),g=a(62086),p=a(49945),j=a(57297),v=a(23688),b=a(70541),N=a(87340),f=a(24877),y=a(35083),w=a(20347),A=a(11243),S=a(85210),C=a.n(S),k=a(67396),E=a(16350),P=a(15938),F=a(96753),I=a(79492),O=a(28490),$=a(63186),D=a(55340),_=a(86217);let z={async fetchUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s}=await D.Ay.get("/users",{params:e});return s},async fetchProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s}=await D.Ay.get("/finance/products",{params:e});return s},async fetchOrders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s}=await D.Ay.get("/finance/orders",{params:e});return s},async fetchAgents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s}=await D.Ay.get("/agents/admin/list",{params:e});return s},async fetchWithdrawals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:s}=await D.Ay.get("/finance/transactions",{params:{...e,type:"WITHDRAWAL"}});return s},async fetchUserStats(){let{data:e}=await D.Ay.get("/users/admin/stats");return e},async fetchAgentStats(){let{data:e}=await D.Ay.get("/agents/admin/stats");return e},async fetchDashboardStats(){let{data:e}=await D.Ay.get("/monitoring/dashboard");return e}};function L(){var e,s,a;let S=(0,_.u)("newOperationsCenter"),[D,L]=(0,k.useState)("users"),[T,M]=(0,k.useState)(""),[R,U]=(0,k.useState)({}),[G,B]=(0,k.useState)([]),[V,W]=(0,k.useState)({open:!1,type:"",item:null}),[H,J]=(0,k.useState)({users:[],products:[],orders:[],withdrawals:[]}),[Z,K]=(0,k.useState)({users:{total:0,active:0,kyc:0,risk:0},products:{total:0,active:0,totalValue:0},orders:{total:0,pending:0,success:0,failed:0,volume:0},withdrawals:{total:0,pending:0,approved:0,rejected:0,amount:0}}),[Y,q]=(0,k.useState)(!1),[X,Q]=(0,k.useState)(null),ee=(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-blue-600 rounded-full mx-auto mb-6 flex items-center justify-center",children:(0,t.jsx)(r.A,{className:"w-10 h-10 text-white"})}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"运营中心升级"}),(0,t.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"新的统一运营中心正在开发中，将整合所有管理功能到一个强大的界面"}),(0,t.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"功能开关未启用 - 请联系技术团队"]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(C(),{href:"/admin/users",className:"group bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:(0,t.jsx)(i.A,{className:"w-6 h-6 text-blue-600"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"用户管理"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"管理用户账户、KYC状态和权限设置"})]}),(0,t.jsxs)(C(),{href:"/admin/products",className:"group bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center group-hover:bg-green-200 transition-colors",children:(0,t.jsx)(c.A,{className:"w-6 h-6 text-green-600"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"产品管理"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"管理投资产品、收益率和供应配置"})]}),(0,t.jsxs)(C(),{href:"/admin/orders",className:"group bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center group-hover:bg-purple-200 transition-colors",children:(0,t.jsx)(d.A,{className:"w-6 h-6 text-purple-600"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"订单管理"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"处理订单状态、风险评估和交易审核"})]}),(0,t.jsxs)(C(),{href:"/admin/agents",className:"group bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-200 transition-colors",children:(0,t.jsx)(o.A,{className:"w-6 h-6 text-orange-600"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"代理管理"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"管理代理商账户、佣金结算和业绩"})]}),(0,t.jsxs)(C(),{href:"/admin/withdrawals",className:"group bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center group-hover:bg-red-200 transition-colors",children:(0,t.jsx)(m.A,{className:"w-6 h-6 text-red-600"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"提现管理"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"审核提现申请、处理资金流转"})]})]})]})}),es=[{id:"users",label:"用户管理",icon:(0,t.jsx)(i.A,{className:"w-4 h-4"}),badge:Z.users.total},{id:"products",label:"产品管理",icon:(0,t.jsx)(c.A,{className:"w-4 h-4"}),badge:Z.products.total},{id:"orders",label:"订单管理",icon:(0,t.jsx)(d.A,{className:"w-4 h-4"}),badge:Z.orders.pending},{id:"withdrawals",label:"提现管理",icon:(0,t.jsx)(m.A,{className:"w-4 h-4"}),badge:Z.withdrawals.pending}],ea=async(e,s,a,t)=>{try{E.vF.info("Operations","".concat(e," ").concat(s),{id:a,data:t}),alert("".concat(e," 操作成功"))}catch(s){alert("".concat(e," 操作失败"))}},et=(0,k.useCallback)(async e=>{if(!localStorage.getItem("token"))return void Q("请先登录");q(!0),Q(null);try{let s;switch(e){case"users":s=await z.fetchUsers({...R,search:T}),J(e=>({...e,users:s.data||[]}));break;case"products":s=await z.fetchProducts({...R,search:T}),J(e=>({...e,products:s.data||[]}));break;case"orders":s=await z.fetchOrders({...R,search:T}),J(e=>({...e,orders:s.data||[]}));break;case"withdrawals":s=await z.fetchWithdrawals({...R,search:T}),J(e=>({...e,withdrawals:s.data||[]}))}}catch(s){E.vF.error("Operations","Failed to load ".concat(e),s),Q(s.message||"加载".concat(e,"数据失败"))}finally{q(!1)}},[R,T]),el=(0,k.useCallback)(async()=>{if(localStorage.getItem("token"))try{let[e,s,a]=await Promise.all([z.fetchUserStats(),z.fetchAgentStats(),z.fetchDashboardStats()]);K({users:e||{total:0,active:0,kyc:0,risk:0},products:(null==a?void 0:a.products)||{total:0,active:0,totalValue:0},orders:(null==a?void 0:a.orders)||{total:0,pending:0,success:0,failed:0,volume:0},withdrawals:(null==a?void 0:a.withdrawals)||{total:0,pending:0,approved:0,rejected:0,amount:0}})}catch(e){E.vF.error("Operations","Failed to load stats",e)}},[]);(0,k.useEffect)(()=>{S&&(el(),et(D))},[S,D,et,el]);let er=()=>{switch(D){case"users":return H.users;case"products":return H.products;case"orders":return H.orders;case"withdrawals":return H.withdrawals;default:return[]}};return(0,t.jsx)(P.f,{allowedRoles:["ADMIN"],children:(0,t.jsx)(F.U,{children:S?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,t.jsx)(r.A,{className:"w-8 h-8 mr-3"}),"运营中心"]}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"统一管理用户、产品、订单、代理和提现"})]}),(0,t.jsxs)($.$n,{onClick:()=>{el(),et(D)},disabled:Y,children:[(0,t.jsx)(w.A,{className:"w-4 h-4 mr-2 ".concat(Y?"animate-spin":"")}),"刷新数据"]})]}),(0,t.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(()=>{switch(D){case"users":return[{title:"总用户数",value:Z.users.total,icon:(0,t.jsx)(i.A,{className:"h-5 w-5"}),color:"blue"},{title:"活跃用户",value:Z.users.active,icon:(0,t.jsx)(v.A,{className:"h-5 w-5"}),color:"green"},{title:"KYC通过",value:Z.users.kyc,icon:(0,t.jsx)(b.A,{className:"h-5 w-5"}),color:"green"},{title:"高风险用户",value:Z.users.risk,icon:(0,t.jsx)(N.A,{className:"h-5 w-5"}),color:"red"}];case"products":return[{title:"总产品数",value:Z.products.total,icon:(0,t.jsx)(c.A,{className:"h-5 w-5"}),color:"blue"},{title:"活跃产品",value:Z.products.active,icon:(0,t.jsx)(v.A,{className:"h-5 w-5"}),color:"green"},{title:"总价值",value:"$".concat((Z.products.totalValue/1e6).toFixed(1),"M"),icon:(0,t.jsx)(f.A,{className:"h-5 w-5"}),color:"green"}];case"orders":return[{title:"总订单",value:Z.orders.total,icon:(0,t.jsx)(d.A,{className:"h-5 w-5"}),color:"blue"},{title:"待处理",value:Z.orders.pending,icon:(0,t.jsx)(y.A,{className:"h-5 w-5"}),color:"yellow"},{title:"成功订单",value:Z.orders.success,icon:(0,t.jsx)(b.A,{className:"h-5 w-5"}),color:"green"},{title:"总成交额",value:"$".concat((Z.orders.volume/1e6).toFixed(1),"M"),icon:(0,t.jsx)(f.A,{className:"h-5 w-5"}),color:"green"}];case"withdrawals":return[{title:"总申请",value:Z.withdrawals.total,icon:(0,t.jsx)(m.A,{className:"h-5 w-5"}),color:"blue"},{title:"待处理",value:Z.withdrawals.pending,icon:(0,t.jsx)(y.A,{className:"h-5 w-5"}),color:"yellow"},{title:"已批准",value:Z.withdrawals.approved,icon:(0,t.jsx)(b.A,{className:"h-5 w-5"}),color:"green"},{title:"总金额",value:"$".concat((Z.withdrawals.amount/1e6).toFixed(1),"M"),icon:(0,t.jsx)(f.A,{className:"h-5 w-5"}),color:"green"}];default:return[]}})().map(e=>(0,t.jsx)($.C,{title:e.title,value:e.value.toString(),icon:e.icon,change:{value:12,type:"increase"}},e.title))}),(0,t.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(O.j,{tabs:es,activeTab:D,onTabChange:L,children:[(0,t.jsx)(I.Z,{filters:[{id:"status",label:"状态",type:"select",options:"users"===D?[{value:"active",label:"活跃"},{value:"inactive",label:"封禁"}]:"orders"===D?[{value:"PENDING",label:"待处理"},{value:"SUCCESS",label:"成功"},{value:"FAILED",label:"失败"}]:[{value:"active",label:"活跃"},{value:"inactive",label:"停用"}]},{id:"dateRange",label:"时间范围",type:"select",options:[{value:"today",label:"今天"},{value:"week",label:"本周"},{value:"month",label:"本月"},{value:"quarter",label:"本季度"}]}],values:R,onChange:U,onSearch:e=>M(e),searchPlaceholder:"users"===D?"搜索用户邮箱或推荐码...":"products"===D?"搜索产品名称或代码...":"orders"===D?"搜索订单ID或交易哈希...":"搜索...",onExport:()=>{window.open("/api/monitoring/export?format=csv&type=".concat(D),"_blank")}}),X&&(0,t.jsxs)($.Fc,{variant:"destructive",className:"mb-4",children:[(0,t.jsx)(N.A,{className:"h-4 w-4"}),(0,t.jsx)($.TN,{children:X})]}),(0,t.jsxs)($.Zp,{children:[(0,t.jsx)($.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)($.ZB,{children:[null==(e=es.find(e=>e.id===D))?void 0:e.label," (",er().length,")"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[G.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["已选择 ",G.length," 项"]}),(0,t.jsx)($.$n,{variant:"outline",size:"sm",children:"批量操作"})]}),(0,t.jsxs)($.$n,{size:"sm",children:[(0,t.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"新建"]})]})]})}),(0,t.jsx)($.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[Y&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(w.A,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-500",children:"加载中..."})]}),!Y&&er().map(e=>((e,s)=>{switch(s){case"users":return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 font-semibold text-sm",children:e.email[0].toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.email}),(0,t.jsx)($.Ex,{className:"ADMIN"===e.role?"bg-purple-100 text-purple-800":"AGENT"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:e.role}),(0,t.jsx)($.Ex,{className:"APPROVED"===e.kycStatus?"bg-green-100 text-green-800":"PENDING"===e.kycStatus?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:e.kycStatus})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["推荐码: ",e.referralCode," • 投资: $",e.stats.totalInvested.toLocaleString()]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)($.Ex,{className:e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:e.isActive?"活跃":"封禁"}),(0,t.jsx)($.$n,{variant:"outline",size:"sm",onClick:()=>W({open:!0,type:"user",item:e}),children:(0,t.jsx)(x.A,{className:"w-4 h-4"})}),(0,t.jsx)($.$n,{variant:e.isActive?"destructive":"default",size:"sm",onClick:async()=>ea(e.isActive?"ban":"unban","user",e.id),children:e.isActive?(0,t.jsx)(h.A,{className:"w-4 h-4"}):(0,t.jsx)(u.A,{className:"w-4 h-4"})})]})]},e.id);case"products":var a;return(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)($.Ex,{children:e.symbol})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,t.jsx)($.Ex,{className:e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:e.isActive?"活跃":"暂停"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"年化收益:"}),(0,t.jsxs)("span",{className:"font-medium text-green-600 ml-2",children:[(e.aprBps/100).toFixed(2),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"锁定期:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:[e.lockDays,"天"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"供应量:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:[e.currentSupply,"/",e.totalSupply||"∞"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["投资范围: $",e.minAmount.toLocaleString()," - $",(null==(a=e.maxAmount)?void 0:a.toLocaleString())||"无限制"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)($.$n,{variant:"outline",size:"sm",onClick:()=>W({open:!0,type:"product",item:e}),children:(0,t.jsx)(x.A,{className:"w-4 h-4"})}),(0,t.jsx)($.$n,{variant:"outline",size:"sm",children:(0,t.jsx)(g.A,{className:"w-4 h-4"})})]})]})]},e.id);case"orders":return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("span",{className:"font-mono text-sm",children:e.id}),(0,t.jsx)($.Ex,{className:"SUCCESS"===e.status?"bg-green-100 text-green-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:e.status}),e.riskScore&&e.riskScore>=4&&(0,t.jsx)($.Ex,{variant:"destructive",children:"高风险"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"用户:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:e.user.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"产品:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:e.product.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"金额:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:["$",e.usdtAmount.toLocaleString()]})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)($.$n,{variant:"outline",size:"sm",onClick:()=>W({open:!0,type:"order",item:e}),children:(0,t.jsx)(x.A,{className:"w-4 h-4"})}),"PENDING"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.$n,{variant:"default",size:"sm",onClick:async()=>ea("approve","order",e.id),children:(0,t.jsx)(p.A,{className:"w-4 h-4"})}),(0,t.jsx)($.$n,{variant:"destructive",size:"sm",onClick:async()=>ea("reject","order",e.id),children:(0,t.jsx)(j.A,{className:"w-4 h-4"})})]})]})]},e.id);case"withdrawals":return(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("span",{className:"font-mono text-sm",children:e.id}),(0,t.jsx)($.Ex,{className:"COMPLETED"===e.status?"bg-green-100 text-green-800":"APPROVED"===e.status?"bg-blue-100 text-blue-800":"PENDING"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:e.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"用户:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:e.user.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"金额:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:["$",e.amount.toLocaleString()]})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)($.$n,{variant:"outline",size:"sm",onClick:()=>W({open:!0,type:"withdrawal",item:e}),children:(0,t.jsx)(x.A,{className:"w-4 h-4"})}),"PENDING"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.$n,{variant:"default",size:"sm",onClick:async()=>ea("approve","withdrawal",e.id),children:(0,t.jsx)(p.A,{className:"w-4 h-4"})}),(0,t.jsx)($.$n,{variant:"destructive",size:"sm",onClick:async()=>ea("reject","withdrawal",e.id),children:(0,t.jsx)(j.A,{className:"w-4 h-4"})})]})]})]},e.id);default:return null}})(e,D)),!Y&&0===er().length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:null==(s=es.find(e=>e.id===D))?void 0:s.icon}),(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["暂无",null==(a=es.find(e=>e.id===D))?void 0:a.label]}),(0,t.jsx)("p",{className:"text-gray-500",children:X?"数据加载失败，请刷新重试":'点击上方"新建"按钮开始添加'})]})]})})]})]})}),(0,t.jsx)($.lG,{open:V.open,onOpenChange:e=>!e&&W({open:!1,type:"",item:null}),children:(0,t.jsxs)($.Cf,{className:"max-w-2xl",children:[(0,t.jsx)($.c7,{children:(0,t.jsxs)($.L3,{children:["user"===V.type&&"用户详情","product"===V.type&&"产品详情","order"===V.type&&"订单详情","agent"===V.type&&"代理详情","withdrawal"===V.type&&"提现详情"]})}),V.item&&(0,t.jsxs)("div",{className:"space-y-4",children:["user"===V.type&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"邮箱:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"角色:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.role})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"KYC状态:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.kycStatus})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"总投资:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:["$",V.item.stats.totalInvested.toLocaleString()]})]})]}),"order"===V.type&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"订单ID:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"状态:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"金额:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:["$",V.item.usdtAmount.toLocaleString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"风险评分:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.riskScore||"N/A"})]})]}),"product"===V.type&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"产品名称:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"代码:"}),(0,t.jsx)("span",{className:"font-medium ml-2",children:V.item.symbol})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"年化收益:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:[(V.item.aprBps/100).toFixed(2),"%"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"锁定期:"}),(0,t.jsxs)("span",{className:"font-medium ml-2",children:[V.item.lockDays,"天"]})]})]})]}),(0,t.jsxs)($.Es,{children:[(0,t.jsx)($.$n,{variant:"outline",onClick:()=>W({open:!1,type:"",item:null}),children:"关闭"}),(0,t.jsx)($.$n,{children:"编辑"})]})]})})]}):ee})})}},79492:(e,s,a)=>{"use strict";a.d(s,{Z:()=>x});var t=a(95688),l=a(40959),r=a(32553),n=a(99599),i=a(24321),c=a(57297),d=a(67396),o=a(63186),m=a(56500);function x(e){let{filters:s,values:a,onChange:x,onSearch:h,onExport:u,searchPlaceholder:g="搜索...",className:p,showExport:j=!0}=e,[v,b]=(0,d.useState)(""),[N,f]=(0,d.useState)(!1),y=(e,s)=>{x({...a,[e]:s})},w=Object.entries(a).filter(e=>{let[s,a]=e;return a&&"all"!==a&&""!==a}).length;return(0,t.jsxs)("div",{className:(0,m.cn)("space-y-4 rounded-lg bg-white p-4 shadow-sm",p),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(l.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(o.pd,{type:"text",placeholder:g,value:v,onChange:e=>{var s;b(s=e.target.value),null==h||h(s)},className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.$n,{variant:"outline",size:"sm",onClick:()=>f(!N),className:"relative",children:[(0,t.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"筛选",w>0&&(0,t.jsx)("span",{className:"ml-2 rounded-full bg-blue-600 px-2 py-0.5 text-xs text-white",children:w})]}),j&&u&&(0,t.jsxs)(o.$n,{variant:"outline",size:"sm",onClick:u,children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"导出"]})]})]}),N&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:e.label}),"select"===e.type&&e.options&&(0,t.jsxs)("select",{value:a[e.id]||"all",onChange:s=>y(e.id,s.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",children:[(0,t.jsx)("option",{value:"all",children:"全部"}),e.options.map(e=>(0,t.jsxs)("option",{value:e.value,children:[e.label,void 0!==e.count&&" (".concat(e.count,")")]},e.value))]}),"date"===e.type&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,t.jsx)("input",{type:"date",value:a[e.id]||"",onChange:s=>y(e.id,s.target.value),className:"w-full rounded-md border border-gray-300 pl-10 pr-3 py-2 text-sm focus:border-blue-500 focus:outline-none"})]}),"daterange"===e.type&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"date",value:a["".concat(e.id,"_start")]||"",onChange:s=>y("".concat(e.id,"_start"),s.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",placeholder:"开始"}),(0,t.jsx)("input",{type:"date",value:a["".concat(e.id,"_end")]||"",onChange:s=>y("".concat(e.id,"_end"),s.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none",placeholder:"结束"})]})]},e.id))}),w>0&&(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(o.$n,{variant:"ghost",size:"sm",onClick:()=>{x(Object.fromEntries(Object.keys(a).map(e=>{var a;return[e,(null==(a=s.find(s=>s.id===e))?void 0:a.type)==="search"?"":"all"]}))),b(""),null==h||h("")},className:"text-gray-600",children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"清除筛选"]})})]})]})}},86217:(e,s,a)=>{"use strict";a.d(s,{u:()=>c}),a(67396);var t=a(16350),l=a(37811);let r={newOperationsCenter:{enabled:!0,rolloutPercentage:100,description:"新运营中心 - 整合用户、产品、订单、代理、提现管理",environments:["development","staging"],dependencies:["entityManager","dataTable"],deprecates:["/admin/users","/admin/products","/admin/orders","/admin/agents","/admin/withdrawals"]},newAnalyticsCenter:{enabled:!0,rolloutPercentage:100,description:"新分析中心 - 整合佣金、报表、通知管理",environments:["development","staging"],dependencies:["dataTable","formBuilder"],deprecates:["/admin/commissions","/admin/reports","/admin/notifications"]},unifiedDashboard:{enabled:!0,rolloutPercentage:100,description:"统一用户仪表板 - 集成个人资料、钱包、通知",environments:["development","staging"],dependencies:["formBuilder"],deprecates:["/dashboard/profile","/dashboard/wallets","/dashboard/notifications"]},newMonitoringAPI:{enabled:!0,rolloutPercentage:100,description:"新监控API模块 - 整合日志、审计、告警、性能",environments:["development","staging"],deprecates:["/api/logs","/api/audit","/api/alerts","/api/performance"]},newFinanceAPI:{enabled:!0,rolloutPercentage:100,description:"新金融API模块 - 整合订单、头寸、交易、佣金",environments:["development","staging"],deprecates:["/api/payouts","/api/withdrawals"]},entityManager:{enabled:!0,rolloutPercentage:100,description:"通用实体管理器组件",environments:["development","staging","production"]},dataTable:{enabled:!0,rolloutPercentage:100,description:"通用数据表格组件",environments:["development","staging","production"]},formBuilder:{enabled:!0,rolloutPercentage:100,description:"动态表单构建器组件",environments:["development","staging","production"]},mockServiceV2:{enabled:!1,rolloutPercentage:0,description:"集中Mock数据管理服务",environments:["development"]},performanceOptimization:{enabled:!0,rolloutPercentage:100,description:"性能优化 - 代码分割、懒加载、图片优化",environments:["development","staging","production"]}};class n{hashCode(e){let s=0;for(let a=0;a<e.length;a++)s=(s<<5)-s+e.charCodeAt(a),s&=s;return Math.abs(s)%n.PERCENT_SCALE}isEnabled(e){let s=this.flags[e];return!!s&&!!s.environments.includes(this.environment)&&!!s.enabled&&(!s.dependencies||!!s.dependencies.every(e=>this.isEnabled(e)))&&(!(s.rolloutPercentage<n.PERCENT_SCALE)||this.userHash<s.rolloutPercentage)}getEnabledFlags(){return Object.keys(this.flags).filter(e=>this.isEnabled(e))}getFlagConfig(e){return this.flags[e]||null}getDeprecatedRoutes(){let e=[];for(let[s,a]of Object.entries(this.flags))this.isEnabled(s)&&a.deprecates&&e.push(...a.deprecates);return e}enableFlag(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if("development"!==this.environment)return void t.vF.warn("FeatureFlags","Feature flags can only be modified in development environment");this.flags[e]={...this.flags[e],enabled:!0,rolloutPercentage:s};{let a=JSON.parse(localStorage.getItem("featureFlagOverrides")||"{}");a[e]={enabled:!0,rolloutPercentage:s},localStorage.setItem("featureFlagOverrides",JSON.stringify(a))}}disableFlag(e){if("development"!==this.environment)return void t.vF.warn("FeatureFlags","Feature flags can only be modified in development environment");this.flags[e]={...this.flags[e],enabled:!1,rolloutPercentage:0};{let s=JSON.parse(localStorage.getItem("featureFlagOverrides")||"{}");s[e]={enabled:!1,rolloutPercentage:0},localStorage.setItem("featureFlagOverrides",JSON.stringify(s))}}resetFlags(){"development"===this.environment&&(this.flags={...r},localStorage.removeItem("featureFlagOverrides"))}getStatus(){let e={};for(let[s,a]of Object.entries(this.flags))e[s]={enabled:this.isEnabled(s),percentage:a.rolloutPercentage,description:a.description};return e}constructor(){this.userHash=0,this.flags={...r},this.environment="production";let e=l.env.NEXT_PUBLIC_FEATURE_FLAGS;if(e)for(let s of e.split(",").map(e=>e.trim()))this.flags[s]&&(this.flags[s]={...this.flags[s],enabled:!0,rolloutPercentage:100});{let e=localStorage.getItem("userId")||"anonymous";this.userHash=this.hashCode(e)}}}n.PERCENT_SCALE=100;let i=new n;function c(e){return i.isEnabled(e)}}},e=>{e.O(0,[4104,9086,896,2683,1284,8735,7701,9649,2039,5340,5322,4171,7172,7358],()=>e(e.s=32806)),_N_E=e.O()}]);