(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{10085:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var t=a(95688),l=a(27100),i=a(54202),r=a(54896),c=a(95598),n=a(18930),d=a(23688),o=a(87340),x=a(24877),m=a(90789),u=a(6218),h=a(35083),p=a(40095),j=a(39658),g=a(61724),v=a(70541),N=a(67396),y=a(71466),b=a(48866),f=a(61456),w=a(85235),z=a(60960),R=a(46467),A=a(19372),Q=a(79227),q=a(15888),S=a(15938),C=a(96753),T=a(28490),k=a(63186),Z=a(55340),M=a(16350);let H={cpu:35.2,memory:68.5,disk:45.8,network:12.3,uptime:"15天 8小时 32分钟",activeConnections:234,responseTime:85,errorRate:.02},O={totalRevenue:2456780.5,dailyRevenue:34567.8,totalOrders:8934,activeUsers:2341,conversionRate:3.2,avgOrderValue:275.3,returnRate:1.8,customerSatisfaction:4.7},W={apiLatency:85,dbQueries:1250,cacheHitRate:94.5,throughput:450,errorRate:.02,availability:99.95,optimizer:{cacheHitRate:.92,queryOptimizations:1847,memoryUsage:256.8,recommendations:["内存使用正常","缓存性能优秀"],healthStatus:"healthy"},queries:{totalQueries:12847,optimizedQueries:11823,slowQueries:23,averageQueryTime:45.2}};function B(){let[e,s]=(0,N.useState)("overview"),[a,B]=(0,N.useState)(H),[F,U]=(0,N.useState)(O),[L,K]=(0,N.useState)(W),[D,E]=(0,N.useState)(null),[P,_]=(0,N.useState)(!0),[I,V]=(0,N.useState)(null),[G,J]=(0,N.useState)(new Date),X=[{id:"overview",label:"总览",icon:(0,t.jsx)(i.A,{className:"h-4 w-4"})},{id:"system",label:"系统监控",icon:(0,t.jsx)(r.A,{className:"h-4 w-4"}),badge:a.cpu>80?"警告":"正常"},{id:"performance",label:"性能分析",icon:(0,t.jsx)(c.A,{className:"h-4 w-4"}),badge:L.availability>=99.9?"优秀":"一般"},{id:"cache",label:"缓存性能",icon:(0,t.jsx)(n.A,{className:"h-4 w-4"}),badge:L.optimizer.cacheHitRate>=.9?"优秀":"良好"},{id:"business",label:"业务指标",icon:(0,t.jsx)(d.A,{className:"h-4 w-4"})},{id:"deprecations",label:"弃用端点",icon:(0,t.jsx)(o.A,{className:"h-4 w-4"})}],[Y,$]=(0,N.useState)([]),ee=async()=>{try{let{data:e}=await Z.monitoringApi.getDeprecations();$((null==e?void 0:e.items)||[])}catch(e){}};return(0,N.useEffect)(()=>{(async()=>{_(!0);try{var e;let[{data:s},a]=await Promise.all([Z.monitoringApi.getDashboard("24h"),Z.monitoringApi.getMetrics()]);if((null==s?void 0:s.business)&&U(e=>{var a,t,l,i;return{...e,totalRevenue:null!=(a=s.business.totalRevenue)?a:e.totalRevenue,dailyRevenue:null!=(t=s.business.dailyRevenue)?t:e.dailyRevenue,totalOrders:null!=(l=s.business.totalOrders)?l:e.totalOrders,activeUsers:null!=(i=s.business.activeUsers)?i:e.activeUsers}}),(null==s?void 0:s.system)&&B(e=>{var a,t,l,i,r,c;return{...e,cpu:null!=(a=s.system.cpu)?a:e.cpu,memory:null!=(t=s.system.memory)?t:e.memory,disk:null!=(l=s.system.disk)?l:e.disk,network:null!=(i=s.system.network)?i:e.network,responseTime:null!=(r=s.system.responseTime)?r:e.responseTime,errorRate:null!=(c=s.system.errorRate)?c:e.errorRate}}),(null==s?void 0:s.performance)&&K(e=>{var a,t,l,i,r;return{...e,apiLatency:null!=(a=s.performance.apiLatency)?a:e.apiLatency,dbQueries:null!=(t=s.performance.dbQueries)?t:e.dbQueries,cacheHitRate:null!=(l=s.performance.cacheHitRate)?l:e.cacheHitRate,throughput:null!=(i=s.performance.throughput)?i:e.throughput,availability:null!=(r=s.performance.availability)?r:e.availability}}),(null==a?void 0:a.data)&&E(a.data),null==a||null==(e=a.data)?void 0:e.performance){let e=a.data.performance;K(s=>{var a,t,l,i,r,c,n,d,o,x,m,u,h,p,j,g,v,N,y,b,f,w;return{...s,apiLatency:null!=(m=e.avgResponseTime)?m:s.apiLatency,cacheHitRate:null!=(u=null==(a=e.optimizer)?void 0:a.cacheHitRate)?u:s.cacheHitRate,availability:null!=(h=e.uptime)?h:s.availability,queries:{...s.queries,totalQueries:null!=(p=null==(t=e.queries)?void 0:t.totalQueries)?p:s.queries.totalQueries,optimizedQueries:null!=(j=null==(l=e.queries)?void 0:l.optimizedQueries)?j:s.queries.optimizedQueries,slowQueries:null!=(g=null==(i=e.queries)?void 0:i.slowQueries)?g:s.queries.slowQueries,averageQueryTime:null!=(v=null==(r=e.queries)?void 0:r.averageQueryTime)?v:s.queries.averageQueryTime},optimizer:{...s.optimizer,cacheHitRate:null!=(N=null==(c=e.optimizer)?void 0:c.cacheHitRate)?N:s.optimizer.cacheHitRate,queryOptimizations:null!=(y=null==(n=e.optimizer)?void 0:n.queryOptimizations)?y:s.optimizer.queryOptimizations,memoryUsage:null!=(b=null==(d=e.optimizer)?void 0:d.memoryUsage)?b:s.optimizer.memoryUsage,recommendations:null!=(f=null==(o=e.optimizer)?void 0:o.recommendations)?f:s.optimizer.recommendations,healthStatus:null!=(w=null==(x=e.optimizer)?void 0:x.healthStatus)?w:s.optimizer.healthStatus}}})}_(!1),J(new Date)}catch(e){M.vF.error("Monitoring","Failed to load monitoring data",e),_(!1),J(new Date)}})();let e=setInterval(async()=>{try{J(new Date),B(e=>({...e,cpu:Math.max(20,Math.min(80,e.cpu+(Math.random()-.5)*5)),memory:Math.max(50,Math.min(90,e.memory+(Math.random()-.5)*3)),responseTime:Math.max(50,Math.min(200,e.responseTime+(Math.random()-.5)*10))})),K(e=>({...e,optimizer:{...e.optimizer,queryOptimizations:e.optimizer.queryOptimizations+Math.floor(3*Math.random()),cacheHitRate:Math.max(.8,Math.min(.98,e.optimizer.cacheHitRate+(Math.random()-.5)*.02))}}))}catch(e){M.vF.error("Monitoring","Failed to update real-time data",e)}},3e4);return()=>{clearInterval(e)}},[]),(0,N.useEffect)(()=>{"deprecations"===e&&ee()},[e]),(0,t.jsx)(S.f,{children:(0,t.jsx)(C.U,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"监控中心"}),(0,t.jsx)("p",{className:"text-gray-600",children:"系统监控、业务指标和性能分析"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,t.jsx)("span",{children:"实时监控"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["更新于: ",G.toLocaleTimeString("zh-CN")]})]})]}),(0,t.jsx)(T.j,{tabs:X,activeTab:e,onTabChange:s,children:(()=>{switch(e){case"overview":default:var s,i,N,S,C,T,Z,M,H,O,W,B,U,K,E,P,_,I,V,G,J,X,$,ee,es,ea,et,el,ei,er,ec,en,ed,eo,ex,em,eu;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(k.mo,{health:99.8}),(0,t.jsx)(k.C,{title:"日收入",value:"\xa5".concat(F.dailyRevenue.toLocaleString("zh-CN")),icon:(0,t.jsx)(x.A,{className:"h-5 w-5 text-green-600"}),change:{value:8.5,type:"increase",label:"比昨日"},status:"success"}),(0,t.jsx)(k.C,{title:"活跃用户",value:F.activeUsers,icon:(0,t.jsx)(m.A,{className:"h-5 w-5 text-blue-600"}),change:{value:12.3,type:"increase",label:"比昨日"}}),(0,t.jsx)(k.C,{title:"查询优化率",value:"".concat((L.queries.optimizedQueries/L.queries.totalQueries*100).toFixed(1),"%"),icon:(0,t.jsx)(d.A,{className:"h-5 w-5 text-purple-600"}),status:L.queries.optimizedQueries/L.queries.totalQueries>=.8?"success":"warning",change:{value:5.2,type:"increase",label:"比昨日"},description:"已优化 ".concat(L.queries.optimizedQueries," 个查询")})]}),D&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(k.C,{title:"日志总数/错误/警告",value:"".concat(null!=(ee=null==(s=D.logs)?void 0:s.total)?ee:0," / ").concat(null!=(es=null==(i=D.logs)?void 0:i.errors)?es:0," / ").concat(null!=(ea=null==(N=D.logs)?void 0:N.warnings)?ea:0),icon:(0,t.jsx)(c.A,{className:"h-5 w-5 text-red-600"}),status:(null==(S=D.logs)?void 0:S.errors)?"warning":"success"}),(0,t.jsx)(k.C,{title:"审计总数/今日/关键",value:"".concat(null!=(et=null==(C=D.audit)?void 0:C.total)?et:0," / ").concat(null!=(el=null==(T=D.audit)?void 0:T.todayEntries)?el:0," / ").concat(null!=(ei=null==(Z=D.audit)?void 0:Z.criticalActions)?ei:0),icon:(0,t.jsx)(u.A,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsx)(k.C,{title:"告警 活跃/已解决/严重",value:"".concat(null!=(er=null==(M=D.alerts)?void 0:M.active)?er:0," / ").concat(null!=(ec=null==(H=D.alerts)?void 0:H.resolved)?ec:0," / ").concat(null!=(en=null==(O=D.alerts)?void 0:O.critical)?en:0),icon:(0,t.jsx)(o.A,{className:"h-5 w-5 text-yellow-600"}),status:(null==(W=D.alerts)?void 0:W.critical)?"warning":"success"}),(0,t.jsx)(k.C,{title:"平均响应时间",value:"".concat(null!=(ed=null==(B=D.performance)?void 0:B.avgResponseTime)?ed:L.apiLatency," ms"),icon:(0,t.jsx)(h.A,{className:"h-5 w-5 text-purple-600"}),status:(null!=(eo=null==(U=D.performance)?void 0:U.avgResponseTime)?eo:L.apiLatency)<120?"success":"warning"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"响应时间趋势"})}),(0,t.jsx)(k.Wu,{style:{height:240},children:(0,t.jsx)(y.u,{width:"100%",height:"100%",children:(0,t.jsxs)(b.b,{data:((null==D||null==(K=D.performance)?void 0:K.metrics)||Array.from({length:12}).map((e,s)=>({name:"".concat(s+1),responseTime:L.apiLatency+Math.round((Math.random()-.5)*20)}))).map((e,s)=>({name:e.name||"".concat(s+1),responseTime:e.responseTime||e.avgResponseTime||L.apiLatency})),margin:{top:10,right:20,bottom:0,left:0},children:[(0,t.jsx)(f.d,{strokeDasharray:"3 3"}),(0,t.jsx)(w.W,{dataKey:"name",tick:{fontSize:12}}),(0,t.jsx)(z.h,{tick:{fontSize:12},unit:"ms"}),(0,t.jsx)(R.m,{}),(0,t.jsx)(A.N,{type:"monotone",dataKey:"responseTime",stroke:"#8884d8",strokeWidth:2,dot:!1})]})})})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"告警概览"})}),(0,t.jsx)(k.Wu,{style:{height:240},children:(0,t.jsx)(y.u,{width:"100%",height:"100%",children:(0,t.jsxs)(Q.E,{data:[{name:"Alerts",active:(null==D||null==(E=D.alerts)?void 0:E.active)||0,resolved:(null==D||null==(P=D.alerts)?void 0:P.resolved)||0,critical:(null==D||null==(_=D.alerts)?void 0:_.critical)||0}],margin:{top:10,right:20,bottom:0,left:0},children:[(0,t.jsx)(f.d,{strokeDasharray:"3 3"}),(0,t.jsx)(w.W,{dataKey:"name",tick:{fontSize:12}}),(0,t.jsx)(z.h,{tick:{fontSize:12}}),(0,t.jsx)(R.m,{}),(0,t.jsx)(q.y,{dataKey:"active",fill:"#3b82f6"}),(0,t.jsx)(q.y,{dataKey:"resolved",fill:"#16a34a"}),(0,t.jsx)(q.y,{dataKey:"critical",fill:"#f59e0b"})]})})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"错误率趋势"})}),(0,t.jsx)(k.Wu,{style:{height:240},children:(0,t.jsx)(y.u,{width:"100%",height:"100%",children:(0,t.jsxs)(b.b,{data:Array.from({length:12}).map((e,s)=>{var a,t;return{name:"".concat(s+1),errorRate:Number(null!=(t=null==D||null==(a=D.performance)?void 0:a.errorRate)?t:L.errorRate)*(.8+.4*Math.random())}}),margin:{top:10,right:20,bottom:0,left:0},children:[(0,t.jsx)(f.d,{strokeDasharray:"3 3"}),(0,t.jsx)(w.W,{dataKey:"name",tick:{fontSize:12}}),(0,t.jsx)(z.h,{tick:{fontSize:12},domain:[0,1],tickFormatter:e=>"".concat(Math.round(100*e),"%")}),(0,t.jsx)(R.m,{formatter:e=>"".concat(Math.round(100*e),"%")}),(0,t.jsx)(A.N,{type:"monotone",dataKey:"errorRate",stroke:"#ef4444",strokeWidth:2,dot:!1})]})})})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"查询时长对比"})}),(0,t.jsx)(k.Wu,{style:{height:240},children:(0,t.jsx)(y.u,{width:"100%",height:"100%",children:(0,t.jsxs)(Q.E,{data:[{name:"Query Time",avg:null!=(ex=null==D||null==(V=D.performance)||null==(I=V.queries)?void 0:I.averageQueryTime)?ex:L.queries.averageQueryTime,p95:Math.round((null!=(em=null==D||null==(J=D.performance)||null==(G=J.queries)?void 0:G.averageQueryTime)?em:L.queries.averageQueryTime)*1.6),p99:Math.round((null!=(eu=null==D||null==($=D.performance)||null==(X=$.queries)?void 0:X.averageQueryTime)?eu:L.queries.averageQueryTime)*2.2)}],margin:{top:10,right:20,bottom:0,left:0},children:[(0,t.jsx)(f.d,{strokeDasharray:"3 3"}),(0,t.jsx)(w.W,{dataKey:"name",tick:{fontSize:12}}),(0,t.jsx)(z.h,{tick:{fontSize:12},unit:"ms"}),(0,t.jsx)(R.m,{}),(0,t.jsx)(q.y,{dataKey:"avg",fill:"#6366f1"}),(0,t.jsx)(q.y,{dataKey:"p95",fill:"#10b981"}),(0,t.jsx)(q.y,{dataKey:"p99",fill:"#f59e0b"})]})})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"系统资源使用率"})]})}),(0,t.jsx)(k.Wu,{className:"space-y-4",children:[{label:"CPU",value:a.cpu,icon:r.A,color:"bg-blue-500"},{label:"内存",value:a.memory,icon:n.A,color:"bg-green-500"},{label:"磁盘",value:a.disk,icon:p.A,color:"bg-yellow-500"},{label:"网络",value:a.network,icon:j.A,color:"bg-purple-500"}].map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(e.icon,{className:"h-4 w-4 text-gray-600"}),(0,t.jsx)("span",{children:e.label})]}),(0,t.jsxs)("span",{className:"font-medium",children:[e.value,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)(l.P.div,{className:"h-2 rounded-full ".concat(e.color),initial:{width:0},animate:{width:"".concat(e.value,"%")},transition:{duration:.8,ease:"easeOut"}})})]},e.label))})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"实时业务数据"})]})}),(0,t.jsx)(k.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:F.totalOrders}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"总订单数"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[F.conversionRate,"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"转化率"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["\xa5",F.avgOrderValue]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"平均订单金额"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:[F.customerSatisfaction,"/5"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"客户满意度"})]})]})})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"查询优化概览"})]})}),(0,t.jsxs)(k.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:L.optimizer.queryOptimizations}),(0,t.jsx)("div",{className:"text-sm text-blue-600",children:"优化次数"})]}),(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(100*L.optimizer.cacheHitRate).toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-sm text-green-600",children:"缓存命中"})]})]}),L.optimizer.recommendations.length>0&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400",children:[(0,t.jsx)("div",{className:"text-sm text-yellow-800 font-medium mb-1",children:"待处理建议"}),(0,t.jsx)("div",{className:"text-sm text-yellow-700",children:L.optimizer.recommendations[0]})]})]})]})]})]});case"system":return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsx)(k.C,{title:"系统运行时间",value:a.uptime,icon:(0,t.jsx)(h.A,{className:"h-5 w-5 text-green-600"}),status:"success"}),(0,t.jsx)(k.C,{title:"活跃连接",value:a.activeConnections,icon:(0,t.jsx)(j.A,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsx)(k.C,{title:"响应时间",value:"".concat(a.responseTime,"ms"),icon:(0,t.jsx)(c.A,{className:"h-5 w-5 text-purple-600"}),status:a.responseTime<100?"success":"warning"})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"系统资源详细监控"})}),(0,t.jsx)(k.Wu,{children:(0,t.jsx)("p",{className:"text-gray-600",children:"实时系统监控图表将在此处显示"})})]})]});case"performance":return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(k.C,{title:"可用性",value:"".concat(L.availability,"%"),icon:(0,t.jsx)(v.A,{className:"h-5 w-5 text-green-600"}),status:L.availability>=99.9?"success":"warning"}),(0,t.jsx)(k.C,{title:"缓存命中率",value:"".concat((100*L.optimizer.cacheHitRate).toFixed(1),"%"),icon:(0,t.jsx)(n.A,{className:"h-5 w-5 text-blue-600"}),status:L.optimizer.cacheHitRate>=.9?"success":"warning",description:"优化器缓存性能"}),(0,t.jsx)(k.C,{title:"查询优化数",value:L.optimizer.queryOptimizations,icon:(0,t.jsx)(d.A,{className:"h-5 w-5 text-purple-600"}),status:"success",description:"已优化 ".concat(L.queries.optimizedQueries,"/").concat(L.queries.totalQueries," 查询")}),(0,t.jsx)(k.C,{title:"内存使用",value:"".concat(L.optimizer.memoryUsage.toFixed(1),"MB"),icon:(0,t.jsx)(p.A,{className:"h-5 w-5 text-orange-600"}),status:L.optimizer.memoryUsage<300?"success":"warning"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"查询性能统计"})]})}),(0,t.jsxs)(k.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:L.queries.totalQueries}),(0,t.jsx)("div",{className:"text-sm text-blue-600",children:"总查询数"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:L.queries.optimizedQueries}),(0,t.jsx)("div",{className:"text-sm text-green-600",children:"已优化查询"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:L.queries.slowQueries}),(0,t.jsx)("div",{className:"text-sm text-yellow-600",children:"慢查询数"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[L.queries.averageQueryTime.toFixed(0),"ms"]}),(0,t.jsx)("div",{className:"text-sm text-purple-600",children:"平均查询时间"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"查询优化率"}),(0,t.jsxs)("span",{className:"font-medium",children:[(L.queries.optimizedQueries/L.queries.totalQueries*100).toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)(l.P.div,{className:"h-2 rounded-full bg-gradient-to-r from-blue-400 to-green-400",initial:{width:0},animate:{width:"".concat(L.queries.optimizedQueries/L.queries.totalQueries*100,"%")},transition:{duration:.8,ease:"easeOut"}})})]})]})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"优化器健康状态"}),(0,t.jsx)("div",{className:"ml-2 w-3 h-3 rounded-full ".concat("healthy"===L.optimizer.healthStatus?"bg-green-400":"warning"===L.optimizer.healthStatus?"bg-yellow-400":"bg-red-400")})]})}),(0,t.jsx)(k.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["状态: ","healthy"===L.optimizer.healthStatus?"健康":"warning"===L.optimizer.healthStatus?"警告":"严重"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"优化建议"}),L.optimizer.recommendations.length>0?(0,t.jsx)("ul",{className:"space-y-1",children:L.optimizer.recommendations.slice(0,3).map(e=>(0,t.jsxs)("li",{className:"text-sm text-gray-600 flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),(0,t.jsx)("span",{children:e})]},e))}):(0,t.jsxs)("p",{className:"text-sm text-green-600 flex items-center space-x-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"系统性能良好，无需优化"})]})]})]})})]})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"性能详细分析"})}),(0,t.jsx)(k.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:[(100*L.optimizer.cacheHitRate).toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"缓存命中率"}),(0,t.jsx)("div",{className:"text-xs text-blue-500 mt-1",children:"优化器核心指标"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:L.optimizer.queryOptimizations}),(0,t.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"查询优化次数"}),(0,t.jsx)("div",{className:"text-xs text-green-500 mt-1",children:"自启动以来累计"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[L.queries.averageQueryTime.toFixed(0),"ms"]}),(0,t.jsx)("div",{className:"text-sm text-purple-600 font-medium",children:"平均查询时间"}),(0,t.jsx)("div",{className:"text-xs text-purple-500 mt-1",children:"包含缓存优化"})]})]})})]})]});case"cache":return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(k.C,{title:"缓存命中率",value:"".concat((100*L.optimizer.cacheHitRate).toFixed(1),"%"),icon:(0,t.jsx)(n.A,{className:"h-5 w-5 text-blue-600"}),status:L.optimizer.cacheHitRate>=.9?"success":"warning",change:{value:2.3,type:"increase",label:"比昨日"}}),(0,t.jsx)(k.C,{title:"缓存内存使用",value:"".concat(L.optimizer.memoryUsage.toFixed(1),"MB"),icon:(0,t.jsx)(p.A,{className:"h-5 w-5 text-purple-600"}),status:L.optimizer.memoryUsage<300?"success":"warning"}),(0,t.jsx)(k.C,{title:"查询缓存数",value:Math.floor(.6*L.queries.totalQueries),icon:(0,t.jsx)(r.A,{className:"h-5 w-5 text-green-600"}),description:"活跃缓存条目"}),(0,t.jsx)(k.C,{title:"响应缓存数",value:Math.floor(.4*L.queries.totalQueries),icon:(0,t.jsx)(j.A,{className:"h-5 w-5 text-orange-600"}),description:"响应级缓存"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"缓存效率分析"})]})}),(0,t.jsx)(k.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"查询缓存命中率"}),(0,t.jsxs)("span",{className:"font-medium",children:[(100*L.optimizer.cacheHitRate).toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)(l.P.div,{className:"h-3 rounded-full bg-gradient-to-r from-blue-400 to-green-400",initial:{width:0},animate:{width:"".concat(100*L.optimizer.cacheHitRate,"%")},transition:{duration:.8,ease:"easeOut"}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-center",children:[(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:"~5ms"}),(0,t.jsx)("div",{className:"text-xs text-green-600",children:"平均命中时间"})]}),(0,t.jsxs)("div",{className:"p-3 bg-red-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-red-600",children:"~50ms"}),(0,t.jsx)("div",{className:"text-xs text-red-600",children:"平均缺失时间"})]})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-600 mb-1",children:L.optimizer.cacheHitRate>=.9?"优秀":L.optimizer.cacheHitRate>=.7?"良好":"需改进"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"缓存效率评级"})]})]})})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"缓存优化建议"})]})}),(0,t.jsx)(k.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg border-l-4 ".concat("healthy"===L.optimizer.healthStatus?"bg-green-50 border-green-400":"warning"===L.optimizer.healthStatus?"bg-yellow-50 border-yellow-400":"bg-red-50 border-red-400"),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:["healthy"===L.optimizer.healthStatus?(0,t.jsx)(v.A,{className:"h-5 w-5 text-green-600"}):(0,t.jsx)(o.A,{className:"h-5 w-5 text-yellow-600"}),(0,t.jsx)("span",{className:"font-medium",children:"healthy"===L.optimizer.healthStatus?"缓存运行健康":"需要关注"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"healthy"===L.optimizer.healthStatus?"缓存系统运行正常，性能优化效果良好":"缓存性能可能存在优化空间"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"智能优化建议"}),L.optimizer.recommendations.length>0?(0,t.jsx)("ul",{className:"space-y-2",children:L.optimizer.recommendations.map(e=>(0,t.jsxs)("li",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e})})]},e))}):(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-green-50 rounded-lg",children:[(0,t.jsx)(v.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{className:"text-sm text-green-700",children:"缓存性能优秀，当前无优化建议"})]})]})]})})]})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"缓存统计详情"})}),(0,t.jsx)(k.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"缓存类型分布"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"查询缓存"})]}),(0,t.jsxs)("span",{className:"text-sm text-blue-600",children:[Math.floor(.6*L.queries.totalQueries)," 条目"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"响应缓存"})]}),(0,t.jsxs)("span",{className:"text-sm text-green-600",children:[Math.floor(.4*L.queries.totalQueries)," 条目"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"性能提升效果"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-purple-600 mb-1",children:"10x"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"响应速度提升"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"相比无缓存查询"})]}),(0,t.jsxs)("div",{className:"p-3 bg-gradient-to-r from-green-50 to-teal-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600 mb-1",children:"65%"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"数据库负载减少"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"通过查询优化"})]})]})]})]})})]})]});case"business":return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(k.C,{title:"总收入",value:"\xa5".concat(F.totalRevenue.toLocaleString("zh-CN")),icon:(0,t.jsx)(x.A,{className:"h-5 w-5 text-green-600"}),change:{value:15.3,type:"increase",label:"本月"},status:"success"}),(0,t.jsx)(k.C,{title:"日收入",value:"\xa5".concat(F.dailyRevenue.toLocaleString("zh-CN")),icon:(0,t.jsx)(d.A,{className:"h-5 w-5 text-green-600"}),change:{value:8.5,type:"increase",label:"比昨日"}}),(0,t.jsx)(k.C,{title:"总订单",value:F.totalOrders,icon:(0,t.jsx)(g.A,{className:"h-5 w-5 text-blue-600"}),change:{value:23.1,type:"increase",label:"本月"}}),(0,t.jsx)(k.C,{title:"活跃用户",value:F.activeUsers,icon:(0,t.jsx)(m.A,{className:"h-5 w-5 text-purple-600"}),change:{value:12.3,type:"increase",label:"本周"}})]}),(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsx)(k.ZB,{children:"业务趋势分析"})}),(0,t.jsx)(k.Wu,{children:(0,t.jsx)("p",{className:"text-gray-600",children:"业务数据趋势图表将在此处显示"})})]})]});case"deprecations":return(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(k.Zp,{children:[(0,t.jsx)(k.aR,{children:(0,t.jsxs)(k.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"弃用端点命中统计"})]})}),(0,t.jsx)(k.Wu,{children:0===Y.length?(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"暂无弃用端点命中"}):(0,t.jsx)("div",{className:"space-y-2",children:Y.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["#",s+1]}),(0,t.jsx)("code",{className:"text-xs",children:e.path})]}),(0,t.jsx)(k.Ex,{variant:"secondary",children:e.count})]},e.path))})})]})})}})()})]})})})}},12858:(e,s,a)=>{Promise.resolve().then(a.bind(a,10085))},28490:(e,s,a)=>{"use strict";a.d(s,{j:()=>r});var t=a(95688),l=a(27100),i=a(56500);function r(e){let{tabs:s,activeTab:a,onTabChange:r,children:c,className:n}=e;return(0,t.jsxs)("div",{className:(0,i.cn)("space-y-4",n),children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex space-x-8",children:s.map(e=>(0,t.jsxs)("button",{onClick:()=>r(e.id),className:(0,i.cn)("relative px-1 pb-4 text-sm font-medium transition-colors",a===e.id?"text-blue-600":"text-gray-500 hover:text-gray-700"),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon&&(0,t.jsx)("span",{children:e.icon}),(0,t.jsx)("span",{children:e.label}),e.badge&&(0,t.jsx)("span",{className:"ml-2 rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:e.badge})]}),a===e.id&&(0,t.jsx)(l.P.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},e.id))})}),(0,t.jsx)("div",{className:"pt-4",children:c})]})}}},e=>{e.O(0,[4104,9086,896,2683,1284,8735,7701,5939,2039,5340,5322,4171,7172,7358],()=>e(e.s=12858)),_N_E=e.O()}]);