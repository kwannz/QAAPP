(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{22104:(e,s,t)=>{Promise.resolve().then(t.bind(t,76655))},46837:(e,s,t)=>{"use strict";t.d(s,{Y:()=>l});var a=t(95688),r=t(67396);function l(e){let{children:s,fallback:t}=e,[l,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{i(!0)},[]),l)?(0,a.jsx)(a.Fragment,{children:s}):t||null}},54980:(e,s,t)=>{"use strict";t.d(s,{G:()=>i});var a=t(67396),r=t(38276),l=t(16350);function i(){let[e,s]=(0,a.useState)(null),[i,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{if(!(0,r.Iz)())return n(!0);try{let e=await t.e(4078).then(t.bind(t,84078));s(e.default),n(!0)}catch(e){l.vF.warn("SafeToast","Failed to load react-hot-toast, toasts disabled",{error:e}),n(!0)}})()},[]),{success:(0,a.useCallback)(s=>{i&&e&&e.success(s)},[i,e]),error:(0,a.useCallback)(s=>{i&&e?e.error(s):l.vF.error("SafeToast","Toast Error (fallback)",{message:s})},[i,e]),loading:(0,a.useCallback)(s=>{if(i&&e)return e.loading(s)},[i,e]),dismiss:(0,a.useCallback)(()=>{i&&e&&e.dismiss()},[i,e])}}},76655:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(95688),r=t(42086),l=t(46942),i=t(97068),n=t(79288),o=t(52856),d=t(52872),c=t(85210),m=t.n(c),u=t(87983),x=t(67396),h=t(15240),f=t(3706),j=t(54980),b=t(55340),p=t(32887),v=t(63186),N=t(46837),g=t(16350);function w(){let[e,s]=(0,x.useState)(!1);(0,u.useRouter)();let{setUser:t,setTokens:a}=(0,p.nc)();return(0,j.G)(),null}let y=f.Ik({email:f.Yj().email("请输入有效的邮箱地址"),password:f.Yj().min(8,"密码至少8位")});function k(){var e,s;let[t,c]=(0,x.useState)(!1),[f,k]=(0,x.useState)(!1),S=(0,u.useRouter)(),{setUser:C,setTokens:A}=(0,p.nc)(),E=(0,j.G)(),{register:_,handleSubmit:F,formState:{errors:I}}=(0,h.mN)({resolver:(0,r.u)(y)}),R=async e=>{var s,t,a;c(!0);try{let t=await b.authApi.login({email:e.email,password:e.password}),{user:a,accessToken:r,refreshToken:l}=(null==(s=t.data)?void 0:s.data)||t.data;C(a),A(r,l),E.success("登录成功！");let i=new URLSearchParams(window.location.search).get("redirect")||"/dashboard";S.push(i)}catch(e){g.vF.error("Auth","Login error",e),E.error((null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"登录失败，请检查邮箱和密码")}finally{c(!1)}};return(0,a.jsx)(N.Y,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-32 -right-32 h-64 w-64 rounded-full bg-blue-200/30"}),(0,a.jsx)("div",{className:"absolute -bottom-32 -left-32 h-64 w-64 rounded-full bg-indigo-200/30"})]}),(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,a.jsx)("div",{className:"mb-6 animate-in slide-in-from-left-4 fade-in duration-300",children:(0,a.jsxs)(m(),{href:"/",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground transition-colors",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-1"}),"返回首页"]})}),(0,a.jsx)("div",{className:"animate-in slide-in-from-bottom-4 fade-in duration-500 delay-150",children:(0,a.jsxs)(v.Zp,{className:"shadow-2xl border-0 bg-white/80 backdrop-blur-sm",children:[(0,a.jsxs)(v.aR,{className:"text-center pb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary to-primary/80 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"QA"})})}),(0,a.jsx)(v.ZB,{className:"text-2xl font-bold",children:"欢迎回来"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"登录您的账户以继续投资之旅"})]}),(0,a.jsxs)(v.Wu,{className:"space-y-6",children:[(0,a.jsxs)("form",{onSubmit:F(R),className:"space-y-4",children:[(0,a.jsx)(v.pd,{..._("email"),type:"email",label:"邮箱地址",placeholder:"请输入邮箱地址",error:null==(e=I.email)?void 0:e.message,leftIcon:(0,a.jsx)(i.A,{className:"h-4 w-4"}),loading:t,autoComplete:"email"}),(0,a.jsx)(v.pd,{..._("password"),type:f?"text":"password",label:"密码",placeholder:"请输入密码",error:null==(s=I.password)?void 0:s.message,leftIcon:(0,a.jsx)(n.A,{className:"h-4 w-4"}),rightIcon:(0,a.jsx)("button",{type:"button",onClick:()=>k(!f),className:"text-muted-foreground hover:text-foreground transition-colors",children:f?(0,a.jsx)(o.A,{className:"h-4 w-4"}):(0,a.jsx)(d.A,{className:"h-4 w-4"})}),loading:t,autoComplete:"current-password"}),(0,a.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,a.jsx)(m(),{href:"/auth/forgot-password",className:"text-primary hover:text-primary/80 transition-colors",children:"忘记密码？"})}),(0,a.jsx)(v.$n,{type:"submit",className:"w-full",size:"lg",disabled:t,children:"登录"})]}),(0,a.jsx)(w,{}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"bg-white px-4 text-muted-foreground",children:"或者"})})]}),(0,a.jsxs)("div",{className:"text-center text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"还没有账户？"})," ",(0,a.jsx)(m(),{href:"/auth/register",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"立即注册"})]})]})]})})]})]})})}}},e=>{e.O(0,[4104,9086,896,2683,1284,8735,7701,3668,2039,2202,5340,4171,7172,7358],()=>e(e.s=22104)),_N_E=e.O()}]);