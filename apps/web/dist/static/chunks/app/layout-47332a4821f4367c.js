(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{16350:(e,t,s)=>{"use strict";s.d(t,{vF:()=>a});var n=s(37811),r=function(e){return e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.CRITICAL=5]="CRITICAL",e}({});class i{getLogLevelFromEnv(){var e;switch(null==(e=n.env.NEXT_PUBLIC_LOG_LEVEL)?void 0:e.toUpperCase()){case"VERBOSE":return 0;case"DEBUG":return 1;case"INFO":default:return 2;case"WARN":return 3;case"ERROR":return 4;case"CRITICAL":return 5}}generateSessionId(){return"web-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(7))}shouldLog(e,t){return!(e<this.config.level)&&(!(this.config.modules.length>0)||!!this.config.modules.includes(t))}formatMessage(e,t,s){let n=new Date().toISOString(),i=r[e].padEnd(8),a=t.padEnd(15);return"[".concat(n,"] [").concat(i,"] [").concat(a,"] ").concat(s)}getConsoleStyle(e){switch(e){case 0:return"color: #888; font-size: 11px;";case 1:return"color: #007ACC; font-weight: normal;";case 2:return"color: #28a745; font-weight: normal;";case 3:return"color: #ffc107; font-weight: bold;";case 4:return"color: #dc3545; font-weight: bold;";case 5:return"color: #ffffff; background-color: #dc3545; font-weight: bold; padding: 2px 4px;";default:return""}}log(e,t,s,n){if(!this.shouldLog(e,t))return;let r={timestamp:new Date,level:e,module:t,message:s,data:n,sessionId:this.config.sessionId,performanceMetrics:this.getPerformanceMetrics()};if(this.logs.push(r),this.logs.length>this.config.maxLogSize&&(this.logs=this.logs.slice(-this.config.maxLogSize)),this.config.enableConsole&&1){let r=this.formatMessage(e,t,s),i=this.getConsoleStyle(e);n?console.log("%c".concat(r),i,n):console.log("%c".concat(r),i)}e>=4&&this.sendToMonitoring(r)}getPerformanceMetrics(){var e,t;if(this.config.enablePerformanceTracking)return{memoryUsage:(null==(t=performance)||null==(e=t.memory)?void 0:e.usedJSHeapSize)||0}}sendToMonitoring(e){try{if(navigator.sendBeacon){let t=JSON.stringify(e);navigator.sendBeacon("/api/monitoring/logs",t)}}catch(e){}}verbose(e,t,s){this.log(0,e,t,s)}debug(e,t,s){this.log(1,e,t,s)}info(e,t,s){this.log(2,e,t,s)}warn(e,t,s){this.log(3,e,t,s)}error(e,t,s){this.log(4,e,t,s)}critical(e,t,s){this.log(5,e,t,s)}startTiming(e){this.config.enablePerformanceTracking&&"undefined"!=typeof performance&&(this.performanceMarks.set(e,performance.now()),this.verbose("Performance","Started timing: ".concat(e)))}endTiming(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Performance";if(!this.config.enablePerformanceTracking||"undefined"==typeof performance)return;let s=this.performanceMarks.get(e);if(void 0===s)return void this.warn("Performance","No start time found for operation: ".concat(e));let n=performance.now(),r=n-s;return this.performanceMarks.delete(e),this.info(t,"".concat(e," completed in ").concat(r.toFixed(2),"ms"),{operation:e,duration:r,startTime:s,endTime:n}),r}trackDatabaseOperation(e,t,s){this.verbose("Database","".concat(e," on ").concat(t),s)}trackApiRequest(e,t,s,n){let r=s&&s>=400?4:2;this.log(r,"API","".concat(e," ").concat(t," - ").concat(s).concat(n?" (".concat(n.toFixed(2),"ms)"):""),{method:e,url:t,statusCode:s,duration:n})}trackUserAction(e,t,s){this.info("UserAction","".concat(e," in ").concat(t),{action:e,component:t,timestamp:Date.now(),...s})}trackError(e,t,s){this.error(t,e.message,{error:e.name,stack:e.stack,context:s})}getLogs(e,t){let s=this.logs;return void 0!==e&&(s=s.filter(t=>t.level>=e)),t&&(s=s.filter(e=>e.module===t)),s}exportLogs(){return JSON.stringify(this.logs,null,2)}clearLogs(){this.logs=[],this.info("VerboseLogger","Logs cleared")}getStats(){var e,t;let s={totalLogs:this.logs.length,sessionId:this.config.sessionId,logsByLevel:{},logsByModule:{},startTime:null==(e=this.logs[0])?void 0:e.timestamp,lastLogTime:null==(t=this.logs[this.logs.length-1])?void 0:t.timestamp};return this.logs.forEach(e=>{let t=r[e.level];s.logsByLevel[t]=(s.logsByLevel[t]||0)+1,s.logsByModule[e.module]=(s.logsByModule[e.module]||0)+1}),s}constructor(e){this.logs=[],this.performanceMarks=new Map,this.config={level:this.getLogLevelFromEnv(),enableConsole:!0,enablePerformanceTracking:!0,maxLogSize:1e3,modules:[],sessionId:this.generateSessionId(),...e},this.info("VerboseLogger","Logger initialized",{config:this.config})}}let a=new i;window.QALogger=a},27518:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,37780,23)),Promise.resolve().then(s.bind(s,93512))},37780:()=>{},46837:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var n=s(95688),r=s(67396);function i(e){let{children:t,fallback:s}=e,[i,a]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{a(!0)},[]),i)?(0,n.jsx)(n.Fragment,{children:t}):s||null}},93512:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>_});var n=s(95688),r=s(66257),i=s(81796),a=s(48620),o=s(6909),c=class extends o.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){let n=t.queryKey,a=t.queryHash??(0,r.F$)(n,t),o=this.get(a);return o||(o=new i.X({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){a.jG.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.MK)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,r.MK)(e,t)):t}notify(e){a.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){a.jG.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){a.jG.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l=s(17295),u=class extends o.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#s=new Map,this.#n=0}#t;#s;#n;build(e,t,s){let n=new l.s({mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){this.#t.add(e);let t=h(e);if("string"==typeof t){let s=this.#s.get(t);s?s.push(e):this.#s.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=h(e);if("string"==typeof t){let s=this.#s.get(t);if(s)if(s.length>1){let t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&this.#s.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=h(e);if("string"!=typeof t)return!0;{let s=this.#s.get(t),n=s?.find(e=>"pending"===e.state.status);return!n||n===e}}runNext(e){let t=h(e);if("string"!=typeof t)return Promise.resolve();{let s=this.#s.get(t)?.find(t=>t!==e&&t.state.isPaused);return s?.continue()??Promise.resolve()}}clear(){a.jG.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#s.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,r.nJ)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,r.nJ)(e,t))}notify(e){a.jG.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return a.jG.batch(()=>Promise.all(e.map(e=>e.continue().catch(r.lQ))))}};function h(e){return e.options.scope?.id}var d=s(85619),f=s(12834),g=s(35878),m=class{#r;#i;#a;#o;#c;#l;#u;#h;constructor(e={}){this.#r=e.queryCache||new c,this.#i=e.mutationCache||new u,this.#a=e.defaultOptions||{},this.#o=new Map,this.#c=new Map,this.#l=0}mount(){this.#l++,1===this.#l&&(this.#u=d.m.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onFocus())}),this.#h=f.t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#r.onOnline())}))}unmount(){this.#l--,0===this.#l&&(this.#u?.(),this.#u=void 0,this.#h?.(),this.#h=void 0)}isFetching(e){return this.#r.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),s=this.#r.build(this,t),n=s.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime((0,r.d2)(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#r.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){let n=this.defaultQueryOptions({queryKey:e}),i=this.#r.get(n.queryHash),a=i?.state.data,o=(0,r.Zw)(t,a);if(void 0!==o)return this.#r.build(this,n).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return a.jG.batch(()=>this.#r.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state}removeQueries(e){let t=this.#r;a.jG.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let s=this.#r;return a.jG.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let s={revert:!0,...t};return Promise.all(a.jG.batch(()=>this.#r.findAll(e).map(e=>e.cancel(s)))).then(r.lQ).catch(r.lQ)}invalidateQueries(e,t={}){return a.jG.batch(()=>(this.#r.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let s={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(a.jG.batch(()=>this.#r.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(r.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(r.lQ)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let s=this.#r.build(this,t);return s.isStaleByTime((0,r.d2)(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(r.lQ).catch(r.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,g.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(r.lQ).catch(r.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,g.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return f.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#i}getDefaultOptions(){return this.#a}setDefaultOptions(e){this.#a=e}setQueryDefaults(e,t){this.#o.set((0,r.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],s={};return t.forEach(t=>{(0,r.Cp)(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){this.#c.set((0,r.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#c.values()],s={};return t.forEach(t=>{(0,r.Cp)(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#a.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,r.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===r.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#a.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#r.clear(),this.#i.clear()}},p=s(89898),b=s(67396),y=s(38276),v=s(37811);function C(){let[e,t]=(0,b.useState)(null),[r,i]=(0,b.useState)(!1);return((0,b.useEffect)(()=>{(async()=>{if(!(0,y.Iz)())return i(!0);try{let e=await s.e(4078).then(s.bind(s,84078));t(()=>e.Toaster),i(!0)}catch(e){"true"===v.env.NEXT_PUBLIC_ENABLE_DEBUG&&console.warn("Failed to load react-hot-toast, toasts disabled:",e),i(!0)}})()},[]),r&&e)?(0,n.jsx)(e,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",fontSize:"14px"},success:{iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}):null}var E=s(32887),w=s(16350),S=s(37811),O=function(e){return e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.ERROR="ERROR",e.RECONNECTING="RECONNECTING",e}({});class k{connect(e){if(e&&(this.accessToken=e),!this.accessToken)return void w.vF.warn("WebSocket","No access token available for WebSocket connection");this.setStatus("CONNECTING");try{this.ws=new WebSocket("".concat(this.url,"?token=").concat(e)),this.ws.addEventListener("open",this.handleOpen.bind(this)),this.ws.onmessage=this.handleMessage.bind(this),this.ws.addEventListener("close",this.handleClose.bind(this)),this.ws.onerror=this.handleError.bind(this)}catch(e){w.vF.error("WebSocket","Failed to create WebSocket connection",{error:e}),this.setStatus("ERROR")}}disconnect(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.ws&&(this.ws.close(1e3,"Manual disconnect"),this.ws=null),this.setStatus("DISCONNECTED"),this.reconnectAttempts=0}send(e){if(this.ws&&this.ws.readyState===WebSocket.OPEN){let t={...e,timestamp:Date.now()};this.ws.send(JSON.stringify(t))}else w.vF.warn("WebSocket","WebSocket is not connected. Cannot send message",{message:e})}onStatusChange(e){return this.statusCallbacks.push(e),()=>{let t=this.statusCallbacks.indexOf(e);t>-1&&this.statusCallbacks.splice(t,1)}}onMessage(e){return this.messageCallbacks.push(e),()=>{let t=this.messageCallbacks.indexOf(e);t>-1&&this.messageCallbacks.splice(t,1)}}getStatus(){if(!this.ws)return"DISCONNECTED";switch(this.ws.readyState){case WebSocket.CONNECTING:return"CONNECTING";case WebSocket.OPEN:return"CONNECTED";case WebSocket.CLOSING:case WebSocket.CLOSED:return"DISCONNECTED";default:return"ERROR"}}handleOpen(){w.vF.info("WebSocket","WebSocket connection established"),this.setStatus("CONNECTED"),this.reconnectAttempts=0,this.startHeartbeat(),this.send({type:"auth",payload:{token:this.accessToken}})}handleMessage(e){try{let t=JSON.parse(e.data);if("pong"===t.type)return;for(let e of("notification"===t.type&&this.handleNotification(t.payload),this.messageCallbacks))try{e(t)}catch(e){w.vF.error("WebSocket","Error in message callback",{error:e})}}catch(e){w.vF.error("WebSocket","Failed to parse WebSocket message",{error:e})}}handleClose(e){if(w.vF.info("WebSocket","WebSocket connection closed",{code:e.code,reason:e.reason}),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),1e3===e.code)return void this.setStatus("DISCONNECTED");this.reconnectAttempts<this.maxReconnectAttempts?(this.setStatus("RECONNECTING"),setTimeout(()=>{this.reconnectAttempts++,w.vF.info("WebSocket","Attempting to reconnect (".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),this.connect()},this.reconnectInterval)):(w.vF.error("WebSocket","Max reconnection attempts reached"),this.setStatus("ERROR"))}handleError(e){w.vF.error("WebSocket","WebSocket error",{event:e}),this.setStatus("ERROR")}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({type:"ping",payload:{timestamp:Date.now()}})},3e4)}setStatus(e){for(let t of this.statusCallbacks)try{t(e)}catch(e){w.vF.error("WebSocket","Error in status callback",{error:e})}}async handleNotification(e){if("toast"===e.type){let t=await s.e(4078).then(s.bind(s,84078)).then(e=>e.default);if(t)switch(e.level){case"success":t.success(e.message);break;case"error":t.error(e.message);break;case"warning":t(e.message,{icon:"⚠️"});break;default:t(e.message)}}}constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectInterval=5e3,this.heartbeatInterval=null,this.statusCallbacks=[],this.messageCallbacks=[],this.accessToken=null,this.url=S.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws"}}let N=new k;var I=s(37811);let D=(0,b.createContext)(null);function R(e){let{children:t}=e,{user:s,isAuthenticated:r}=(0,E.nc)(),[i,a]=(0,b.useState)(O.DISCONNECTED),{notifications:o,unreadCount:c,markAsRead:l,clearAll:u}=function(){let[e,t]=(0,b.useState)([]),[s,n]=(0,b.useState)(0);return(0,b.useEffect)(()=>N.onMessage(e=>{switch(e.type){case"notification":t(t=>[e.payload,...t].slice(0,50)),e.payload.isRead||n(e=>e+1);break;case"notification_read":t(t=>t.map(t=>t.id===e.payload.notificationId?{...t,isRead:!0}:t)),n(e=>Math.max(0,e-1));break;case"notification_cleared":t([]),n(0)}}),[]),{notifications:e,unreadCount:s,markAsRead:(0,b.useCallback)(e=>{N.send({type:"mark_notification_read",payload:{notificationId:e}})},[]),clearAll:(0,b.useCallback)(()=>{N.send({type:"clear_notifications",payload:{}})},[])}}();return(0,b.useEffect)(()=>N.onStatusChange(a),[]),(0,b.useEffect)(()=>{"true"!==I.env.NEXT_PUBLIC_ENABLE_WEBSOCKET&&w.vF.info("WebSocket","功能已准备就绪，可通过 NEXT_PUBLIC_ENABLE_WEBSOCKET=true 启用")},[r,s]),(0,n.jsx)(D.Provider,{value:{status:i,sendMessage:e=>{r&&N.send(e)},notifications:o,unreadCount:c,markAsRead:l,clearAll:u},children:t})}function P(){let{status:e}=function(){let e=(0,b.useContext)(D);if(!e)throw Error("useWebSocketContext must be used within a WebSocketProvider");return e}();return null}var x=s(46837);let T={chains:[],connectors:[],transports:{},state:{connections:new Map,chainId:void 0,status:"disconnected"}},q=(0,b.createContext)(T);function W(e){let{children:t}=e;return(0,n.jsx)(q.Provider,{value:T,children:(0,n.jsx)("div",{"data-wagmi-provider":"mock-fallback",children:t})})}let A={isWeb3Enabled:!1,isConnected:!1,address:void 0,chainId:void 0,connect:async()=>{},disconnect:async()=>{}},M=(0,b.createContext)(A);function Q(e){let{children:t}=e;return(0,n.jsx)(W,{children:t})}function F(e){let{children:t,wagmiConfig:r}=e,[i,a]=(0,b.useState)(!1),[o,c]=(0,b.useState)(null),[l,u]=(0,b.useState)(null),[h,d]=(0,b.useState)(null),[f,g]=(0,b.useState)(!1);if((0,b.useEffect)(()=>{if((0,y.wZ)(),!(0,y.Iz)()||!r)return void a(!0);(async()=>{try{if(!r)throw Error("No wagmi config available");let[e,t]=await Promise.all([Promise.all([s.e(4104),s.e(6905),s.e(6701),s.e(1279),s.e(5560),s.e(6887)]).then(s.bind(s,96887)),Promise.all([s.e(5006),s.e(4104),s.e(9086),s.e(6905),s.e(6701),s.e(1279),s.e(449)]).then(s.bind(s,8025))]),{WagmiProvider:i}=e,{RainbowKitProvider:o,lightTheme:l,darkTheme:h}=t;if(!i||!o)throw Error("Failed to load Wagmi/RainbowKit components");c(()=>i);let d=e=>(0,n.jsx)(o,{theme:{lightMode:l({accentColor:"#3b82f6",accentColorForeground:"white",borderRadius:"medium",fontStack:"system"}),darkMode:h({accentColor:"#3b82f6",accentColorForeground:"white",borderRadius:"medium",fontStack:"system"})},appInfo:{appName:"QA Fixed Income Platform",learnMoreUrl:"https://qa-app.com"},...e});d.displayName="RainbowKitProviderWrapper",u(()=>d),g(!0),a(!0),w.vF.info("Web3Provider","Wagmi/RainbowKit components loaded successfully")}catch(e){w.vF.warn("Web3Provider","Failed to load Wagmi/RainbowKit components, using fallback mode",{error:e}),d(e instanceof Error?e.message:"Unknown error"),g(!1),a(!0)}})()},[r]),!i)return(0,n.jsx)(Q,{children:(0,n.jsx)("div",{"data-wagmi-provider":"loading",children:t})});if(f&&o&&l&&r)try{return(0,n.jsx)(o,{config:r,children:(0,n.jsx)(l,{children:(0,n.jsx)("div",{"data-wagmi-provider":"active",children:t})})})}catch(e){w.vF.error("Web3Provider","Runtime error in Wagmi provider, falling back to mock context",{error:e})}let m=h||"Web3配置未启用";return window.__web3_fallback_logged||((null==h?void 0:h.includes("项目ID"))||null==h||h.includes("project"),window.__web3_fallback_logged=!0),(0,n.jsx)(Q,{children:(0,n.jsx)("div",{"data-wagmi-provider":"fallback",title:m,children:t})})}function j(e){let{children:t}=e,[r,i]=(0,b.useState)(A),[a,o]=(0,b.useState)(null),[c]=(0,b.useState)(()=>new m({defaultOptions:{queries:{staleTime:6e4,retry:(e,t)=>{var s,n;return!((null==t||null==(s=t.message)?void 0:s.includes("user rejected"))||(null==t||null==(n=t.message)?void 0:n.includes("User denied")))&&e<3}}}}));return(0,b.useEffect)(()=>{(async()=>{if((0,y.wZ)(),(0,y.Iz)())try{let{createWagmiConfig:e}=await Promise.all([s.e(5006),s.e(4104),s.e(9086),s.e(6905),s.e(6701),s.e(1279),s.e(449),s.e(3886)]).then(s.bind(s,3886)),t=e();t?(o(t),i({isWeb3Enabled:!0,isConnected:!1,connect:async()=>{},disconnect:async()=>{}})):w.vF.warn("Web3Provider","Web3 config creation failed, running in fallback mode")}catch(e){w.vF.warn("Web3Provider","Web3 initialization failed",{error:e})}})()},[]),(0,n.jsx)(M.Provider,{value:r,children:(0,n.jsx)(p.Ht,{client:c,children:(0,n.jsx)(F,{wagmiConfig:a,children:t})})})}function L(e){let{children:t}=e;return(0,n.jsx)(x.Y,{fallback:(0,n.jsx)(M.Provider,{value:A,children:(0,n.jsx)(p.Ht,{client:new m,children:t})}),children:(0,n.jsx)(j,{children:t})})}function _(e){let{children:t,cookies:s}=e,[r]=(0,b.useState)(()=>new m({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(e,t)=>!(t instanceof Error&&t.message.includes("401"))&&e<2,retryDelay:e=>Math.min(1e3*2**e,3e4)},mutations:{retry:1}}})),[i,a]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{a(!0)},[]),(0,n.jsx)(p.Ht,{client:r,children:(0,n.jsx)(E.OJ,{children:(0,n.jsx)(L,{children:(0,n.jsxs)(R,{children:[t,(0,n.jsx)(C,{}),(0,n.jsx)(P,{}),!1]})})})})}}},e=>{e.O(0,[1109,896,2202,4171,7172,7358],()=>e(e.s=27518)),_N_E=e.O()}]);