"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{20347:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},30643:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},35083:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},61743:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},70541:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},70600:(e,s,t)=>{t.r(s),t.d(s,{ProductPurchase:()=>D});var a=t(95688),n=t(23688);let i=(0,t(61200).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var r=t(70541),l=t(87340),c=t(82638),d=t(30643),o=t(67396),x=t(4389),h=t(88433),m=t(35083),p=t(20347),u=t(61743),j=t(97199),g=t(68349),N=t(45274),y=t(23824),v=t(63186),f=t(19073),b=t(76472);function w(e){let{productType:s,ethAmount:t,onSuccess:n,onError:d,onCancel:w}=e,{address:T,isConnected:S,chainId:D}=(0,h.F)(),{data:C}=(0,N.A)({address:T}),A=(0,b.hw)(),[k,E]=(0,o.useState)({step:"preparation"}),{data:U,isLoading:H,isSuccess:F,isError:I}=(0,y.g)({hash:k.txHash}),$=f.Tg[s],R=(0,j.X)(t,18),L=2e3*Number.parseFloat(t),M=!!C&&C.value>=R,z=BigInt(2e5),q=BigInt(2e10),B=C?z*q:BigInt(0),V=R+B;(0,o.useEffect)(()=>{F&&U?(E(e=>({...e,step:"success"})),x.oR.success("支付成功！",{description:"您的投资凭证NFT已发送到钱包"}),null==n||n(U.transactionHash,"pending")):I&&(E(e=>({...e,step:"error",error:"交易执行失败"})),x.oR.error("支付失败",{description:"交易未能成功执行，请重试"}),null==d||d("交易执行失败"))},[F,I,U,n,d]);let _=async()=>{if(!S||!T)return void x.oR.error("请先连接钱包");if(!M)return void x.oR.error("ETH余额不足");try{E(e=>({...e,step:"confirmation"})),x.oR.info("请在钱包中确认交易",{description:"投资金额: ".concat(t," ETH (≈").concat(L," USDT)")}),await A.purchaseProductWithETH(s,t),A.hash&&(E(e=>({...e,step:"processing",txHash:A.hash})),x.oR.loading("交易处理中...",{description:"等待区块链确认交易"}))}catch(t){var e;let s=(null==t||null==(e=t.message)?void 0:e.includes("User rejected"))?"用户取消了交易":(null==t?void 0:t.message)||"支付失败";E(e=>({...e,step:"error",error:s})),x.oR.error("支付失败",{description:s}),null==d||d(s)}},P=()=>{E({step:"preparation"})};return(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:["preparation","confirmation","processing","success"].map((e,s,t)=>{let n=e===k.step,i=["confirmation","processing","success"].indexOf(k.step)>s-1,l="error"===k.step;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full border-2 flex items-center justify-center text-sm font-medium ".concat(l&&s>0?"bg-red-100 border-red-300 text-red-600":i||n?"bg-orange-100 border-orange-500 text-orange-600":"bg-gray-100 border-gray-300 text-gray-400"),children:i&&!n&&"error"!==k.step?(0,a.jsx)(r.A,{className:"w-4 h-4"}):s+1}),s<t.length-1&&(0,a.jsx)("div",{className:"w-12 h-0.5 mx-2 ".concat(i&&!l?"bg-orange-500":"bg-gray-300")})]},e)})}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-600",children:["preparation"===k.step&&"准备支付","confirmation"===k.step&&"钱包确认","processing"===k.step&&"处理中","success"===k.step&&"支付成功","error"===k.step&&"支付失败"]})]}),(()=>{switch(k.step){case"preparation":default:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{className:"pb-3",children:(0,a.jsxs)(v.ZB,{className:"text-lg flex items-center gap-2",children:[$.icon," ",$.name]})}),(0,a.jsxs)(v.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"投资金额"}),(0,a.jsxs)("p",{className:"font-semibold",children:[t," ETH"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"等值USDT"}),(0,a.jsxs)("p",{className:"font-semibold",children:[L.toLocaleString()," USDT"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"年化收益"}),(0,a.jsxs)("p",{className:"font-semibold text-green-600",children:[$.apr,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"投资期限"}),(0,a.jsxs)("p",{className:"font-semibold",children:[$.duration,"天"]})]})]}),(0,a.jsx)(v.wv,{}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-orange-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"预期收益"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"投资本金:"}),(0,a.jsxs)("span",{children:[L.toLocaleString()," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"预期收益:"}),(0,a.jsxs)("span",{className:"text-green-600",children:["+",(L*$.apr/100*($.duration/365)).toFixed(2)," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-medium border-t pt-1",children:[(0,a.jsx)("span",{children:"到期总值:"}),(0,a.jsxs)("span",{className:"text-green-600",children:[(L+L*$.apr/100*($.duration/365)).toFixed(2)," USDT"]})]})]})]})]})]}),(0,a.jsx)(v.Zp,{children:(0,a.jsxs)(v.Wu,{className:"pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"钱包余额检查"}),(0,a.jsx)(v.Ex,{variant:M?"default":"destructive",children:M?"充足":"不足"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"当前ETH余额:"}),(0,a.jsxs)("span",{children:[C?(0,g.c)(C.value):"0"," ETH"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"需要支付:"}),(0,a.jsxs)("span",{children:[t," ETH"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"预计Gas费:"}),(0,a.jsxs)("span",{children:["~",(0,g.c)(B)," ETH"]})]}),(0,a.jsx)(v.wv,{}),(0,a.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,a.jsx)("span",{children:"总计需要:"}),(0,a.jsxs)("span",{className:M?"":"text-red-600",children:[(0,g.c)(V)," ETH"]})]})]}),!M&&(0,a.jsxs)(v.Fc,{variant:"destructive",className:"mt-3",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"余额不足。请确保钱包有足够的ETH支付投资金额和Gas费用。"})]})]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(v.$n,{variant:"outline",onClick:w,className:"flex-1",children:"取消"}),(0,a.jsxs)(v.$n,{onClick:_,disabled:!M||A.isPending,className:"flex-1",children:[A.isPending?(0,a.jsx)(i,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"确认支付"]})]})]});case"confirmation":return(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(i,{className:"w-8 h-8 text-orange-600 animate-spin"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"等待钱包确认"}),(0,a.jsx)("p",{className:"text-gray-600",children:"请在钱包中确认交易详情"})]}),(0,a.jsxs)(v.Fc,{children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"请检查钱包弹窗并确认交易。确保Gas费设置合理以避免交易失败。"})]})]});case"processing":return(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(p.A,{className:"w-8 h-8 text-yellow-600 animate-spin"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"交易处理中"}),(0,a.jsx)("p",{className:"text-gray-600",children:"等待区块链网络确认交易"})]}),k.txHash&&(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"交易哈希:"}),(0,a.jsx)("div",{className:"font-mono text-xs break-all",children:k.txHash}),0xaa36a7===D&&(0,a.jsxs)(v.$n,{variant:"link",size:"sm",onClick:()=>window.open("https://sepolia.etherscan.io/tx/".concat(k.txHash),"_blank"),className:"mt-2 text-xs",children:[(0,a.jsx)(u.A,{className:"w-3 h-3 mr-1"}),"在区块浏览器查看"]})]}),(0,a.jsxs)(v.Fc,{children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"交易正在处理中，通常需要1-3分钟。请不要关闭页面。"})]})]});case"success":var e,s;return(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(r.A,{className:"w-8 h-8 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-700",children:"支付成功！"}),(0,a.jsx)("p",{className:"text-gray-600",children:"您的投资凭证NFT已发送到钱包"})]}),U&&(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,a.jsxs)("div",{children:["交易哈希: ",(0,a.jsx)("span",{className:"font-mono text-xs",children:U.transactionHash})]}),(0,a.jsxs)("div",{children:["区块高度: ",null==(e=U.blockNumber)?void 0:e.toString()]}),(0,a.jsxs)("div",{children:["Gas使用: ",null==(s=U.gasUsed)?void 0:s.toString()]})]}),0xaa36a7===D&&(0,a.jsxs)(v.$n,{variant:"link",size:"sm",onClick:()=>window.open("https://sepolia.etherscan.io/tx/".concat(U.transactionHash),"_blank"),children:[(0,a.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"在区块浏览器查看"]})]}),(0,a.jsxs)(v.Fc,{children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"投资已成功！您可以在个人仪表板查看投资详情和收益情况。"})]})]});case"error":return(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(l.A,{className:"w-8 h-8 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-700",children:"支付失败"}),(0,a.jsx)("p",{className:"text-gray-600",children:k.error||"发生未知错误"})]}),(0,a.jsxs)(v.Fc,{variant:"destructive",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"用户取消了交易"===k.error?"您取消了交易。如需继续投资，请重新发起支付。":"交易执行失败。请检查网络连接和钱包设置后重试。"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(v.$n,{variant:"outline",onClick:w,className:"flex-1",children:"关闭"}),(0,a.jsx)(v.$n,{onClick:P,className:"flex-1",children:"重新支付"})]})]})}})()]})}class T{initialize(e){let s=(0,f.$i)(e||0xaa36a7),t=this.isTestnetChain(e),a=this.isSupportedChain(e);return this.state={addresses:s,deploymentStatus:{treasury:this.checkDeploymentStatus(s.TREASURY),qaCard:this.checkDeploymentStatus(s.QA_CARD),usdt:this.checkDeploymentStatus(s.USDT)},chainId:e,isTestnet:t,isSupported:a},this.notifyListeners(),this.state}isTestnetChain(e){return[0xaa36a7,31337].includes(e||0)}isSupportedChain(e){return[1,137,42161,0xaa36a7,31337].includes(e||0)}checkDeploymentStatus(e){var s;let t="0x0000000000000000000000000000000000000000"===e,a=e.startsWith("0x")&&42===e.length&&!t;return{isDeployed:!t,verified:(null==(s=this.state)||!s.isTestnet)&&void 0,deployedAt:a?new Date().toISOString():void 0}}getState(){return this.state}areContractsDeployed(){return!!this.state&&this.state.deploymentStatus.treasury.isDeployed&&this.state.deploymentStatus.qaCard.isDeployed&&this.state.deploymentStatus.usdt.isDeployed}getUndeployedContracts(){if(!this.state)return[];let e=[];return this.state.deploymentStatus.treasury.isDeployed||e.push("Treasury"),this.state.deploymentStatus.qaCard.isDeployed||e.push("QACard"),this.state.deploymentStatus.usdt.isDeployed||e.push("USDT"),e}updateContractAddress(e,s){this.state&&(this.state.addresses={...this.state.addresses,[e.toUpperCase()]:s},this.state.deploymentStatus[e]=this.checkDeploymentStatus(s),this.notifyListeners())}addListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}notifyListeners(){if(this.state)for(let e of this.listeners)e(this.state)}getProductConfig(e){return f.Tg[e]}getSupportedChains(){return[{id:1,name:"Ethereum Mainnet",icon:"⧫",isTestnet:!1},{id:137,name:"Polygon",icon:"⬟",isTestnet:!1},{id:42161,name:"Arbitrum One",icon:"\uD83D\uDD37",isTestnet:!1},{id:0xaa36a7,name:"Sepolia Testnet",icon:"⚡",isTestnet:!0},{id:31337,name:"Localhost",icon:"\uD83C\uDFE0",isTestnet:!0}]}generateDeploymentReport(){var e;if(!this.state)return"Contract manager not initialized";let{addresses:s,deploymentStatus:t,chainId:a,isTestnet:n}=this.state,i=(null==(e=this.getSupportedChains().find(e=>e.id===a))?void 0:e.name)||"Unknown",r="\uD83D\uDD17 合约部署状态报告\n";r+="━━━━━━━━━━━━━━━━━━━━━━━━━━\n",r+="网络: ".concat(i," (").concat(a,")\n"),r+="类型: ".concat(n?"测试网":"主网","\n"),r+="时间: ".concat(new Date().toLocaleString(),"\n\n"),r+="\uD83D\uDCCB 合约地址:\n",r+="Treasury: ".concat(s.TREASURY,"\n"),r+="QACard:   ".concat(s.QA_CARD,"\n"),r+="USDT:     ".concat(s.USDT,"\n\n"),r+="\uD83D\uDCCA 部署状态:\n",r+="Treasury: ".concat(t.treasury.isDeployed?"✅":"❌"," ").concat(t.treasury.isDeployed?"Deployed":"Not Deployed","\n"),r+="QACard:   ".concat(t.qaCard.isDeployed?"✅":"❌"," ").concat(t.qaCard.isDeployed?"Deployed":"Not Deployed","\n"),r+="USDT:     ".concat(t.usdt.isDeployed?"✅":"❌"," ").concat(t.usdt.isDeployed?"Deployed":"Not Deployed","\n\n");let l=this.areContractsDeployed();if(r+="\uD83C\uDFAF 总体状态: ".concat(l?"✅ 所有合约已部署":"⚠️ 部分合约未部署","\n"),!l){let e=this.getUndeployedContracts();r+="未部署: ".concat(e.join(", "),"\n")}return r}constructor(){this.state=null,this.listeners=[]}}let S=new T;function D(e){var s;let{productType:t,onSuccess:m,onError:p,className:u=""}=e,{isConnected:j,chainId:g}=(0,h.F)(),{state:N,areContractsDeployed:y}=function(){let[e,s]=(0,o.useState)(S.getState());return(0,o.useEffect)(()=>S.addListener(s),[]),{state:e,manager:S,areContractsDeployed:S.areContractsDeployed(),getUndeployedContracts:S.getUndeployedContracts(),generateReport:S.generateDeploymentReport}}(),[b,T]=(0,o.useState)("selection"),[D,C]=(0,o.useState)("USDT"),[A,k]=(0,o.useState)(""),[E,U]=(0,o.useState)(!1),[H,F]=(0,o.useState)(!1),I=f.Tg[t],$=[.05,.1,.25];(0,o.useEffect)(()=>{g&&S.initialize(g)},[g]);let R=null!=(s=null==N?void 0:N.isSupported)&&s,L=()=>{if(!A)return null;let e=Number.parseFloat(A);if(isNaN(e)||e<=0)return null;let s="ETH"===D?2e3*e:e,t=I.apr/100/365,a=s*t*I.duration;return{principal:s,totalReturn:a,totalValue:s+a,dailyReturn:s*t,originalAmount:e,originalCurrency:D}},M=e=>{T(e)},z=()=>{let e=(()=>{let e=Number.parseFloat(A);if(isNaN(e)||e<=0)return{isValid:!1,error:"请输入有效的投资金额"};let s="ETH"===D?2e3*e:e;return s<I.minInvestment?{isValid:!1,error:"最小投资金额为 ".concat(I.minInvestment," USDT")}:s>I.maxInvestment?{isValid:!1,error:"最大投资金额为 ".concat(I.maxInvestment," USDT")}:{isValid:!0}})();return e.isValid?y?void(F(!0),U(!0)):void x.oR.error("合约尚未部署",{description:"请等待合约部署完成或切换到支持的网络"}):void x.oR.error(e.error)};return(0,a.jsxs)("div",{className:"max-w-lg mx-auto ".concat(u),children:[(()=>{switch(b){case"selection":default:return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(v.Zp,{children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)(v.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:I.icon}),"投资 ",I.name]})}),(0,a.jsxs)(v.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"年化收益率"}),(0,a.jsxs)("p",{className:"font-semibold text-green-600",children:[I.apr,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"投资期限"}),(0,a.jsxs)("p",{className:"font-semibold",children:[I.duration,"天"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"最小投资"}),(0,a.jsxs)("p",{className:"font-semibold",children:[I.minInvestment.toLocaleString()," USDT"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"最大投资"}),(0,a.jsxs)("p",{className:"font-semibold",children:[I.maxInvestment.toLocaleString()," USDT"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"支付方式"}),(0,a.jsx)(v.tU,{value:D,onValueChange:e=>C(e),children:(0,a.jsxs)(v.j7,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(v.Xi,{value:"USDT",children:"\uD83D\uDC8E USDT"}),(0,a.jsx)(v.Xi,{value:"ETH",children:"⧫ ETH"})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["投资金额 (",D,")"]}),(0,a.jsx)(v.pd,{type:"number",value:A,onChange:e=>k(e.target.value),placeholder:"".concat(I.minInvestment," - ").concat(I.maxInvestment),min:"ETH"===D?I.minInvestment/2e3:I.minInvestment,max:"ETH"===D?I.maxInvestment/2e3:I.maxInvestment,step:"ETH"===D?"0.001":"1"}),(0,a.jsx)("div",{className:"flex gap-2",children:"ETH"===D?$.map(e=>(0,a.jsxs)(v.$n,{variant:"outline",size:"sm",onClick:()=>k(e.toString()),children:[e," ETH"]},e)):[I.minInvestment,2*I.minInvestment,5*I.minInvestment].map(e=>(0,a.jsx)(v.$n,{variant:"outline",size:"sm",onClick:()=>k(e.toString()),children:e.toLocaleString()},e))})]}),L()&&(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border",children:[(0,a.jsxs)("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),"预期收益"]}),(0,a.jsx)("div",{className:"space-y-2 text-sm",children:(()=>{let e=L();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"投资本金"}),(0,a.jsxs)("span",{className:"font-medium",children:[e.originalAmount," ",e.originalCurrency,"ETH"===D&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(≈",e.principal.toLocaleString()," USDT)"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"预期收益"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:["+",e.totalReturn.toFixed(2)," USDT"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"日均收益"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:["+",e.dailyReturn.toFixed(2)," USDT"]})]}),(0,a.jsxs)("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[(0,a.jsx)("span",{children:"到期总值"}),(0,a.jsxs)("span",{className:"text-green-600",children:[e.totalValue.toFixed(2)," USDT"]})]})]})})()})]}),(0,a.jsx)("div",{className:"space-y-3",children:j?R?y?(0,a.jsx)(v.$n,{onClick:z,disabled:!A||H,className:"w-full",size:"lg",children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{className:"w-4 h-4 mr-2 animate-spin"}),"处理中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"w-4 h-4 mr-2"}),"确认投资"]})}):(0,a.jsxs)(v.Fc,{variant:"destructive",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"智能合约尚未部署。请等待部署完成或切换网络。"})]}):(0,a.jsxs)(v.Fc,{variant:"destructive",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"当前网络不受支持。请切换到支持的网络后继续。"})]}):(0,a.jsxs)(v.$n,{onClick:()=>M("wallet"),className:"w-full",size:"lg",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"连接钱包"]})}),(0,a.jsxs)(v.Fc,{children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{className:"text-xs",children:"投资有风险，请谨慎投资。本产品收益预期基于历史数据，实际收益可能有所不同。"})]})]})]})});case"wallet":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"连接钱包"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"请连接您的钱包以继续投资"})]}),(0,a.jsx)(v.n6,{onConnectionChange:e=>{e&&setTimeout(()=>M("selection"),1e3)},showNetworkInfo:!0,showContractStatus:!0}),(0,a.jsx)(v.$n,{variant:"outline",onClick:()=>M("selection"),className:"w-full",children:"返回投资页面"})]});case"success":return(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(r.A,{className:"w-8 h-8 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"投资成功！"}),(0,a.jsx)("p",{className:"text-gray-600",children:"您的投资凭证NFT已发送到钱包"})]}),(0,a.jsxs)(v.Fc,{children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)(v.TN,{children:"您可以在个人仪表板查看投资详情和收益情况。"})]}),(0,a.jsx)(v.$n,{onClick:()=>{T("selection"),k(""),F(!1)},className:"w-full",children:"继续投资"})]})}})(),(0,a.jsx)(v.lG,{open:E,onOpenChange:U,children:(0,a.jsxs)(v.Cf,{className:"max-w-md",children:[(0,a.jsx)(v.c7,{children:(0,a.jsx)(v.L3,{children:"ETH 支付"})}),(0,a.jsx)(w,{productType:t,ethAmount:A,onSuccess:(e,s)=>{U(!1),T("success"),F(!1),x.oR.success("投资成功！",{description:"您的投资凭证NFT已发送到钱包"}),null==m||m(e,s)},onError:e=>{U(!1),F(!1),x.oR.error("投资失败",{description:e}),null==p||p(e)},onCancel:()=>{U(!1),F(!1)}})]})})]})}},82638:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},87340:(e,s,t)=>{t.d(s,{A:()=>a});let a=(0,t(61200).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},97199:(e,s,t)=>{t.d(s,{X:()=>i});var a=t(69975);class n extends a.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function i(e,s){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new n({value:e});let[t,a="0"]=e.split("."),i=t.startsWith("-");if(i&&(t=t.slice(1)),a=a.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${a}`))&&(t=`${BigInt(t)+1n}`),a="";else if(a.length>s){let[e,n,i]=[a.slice(0,s-1),a.slice(s-1,s),a.slice(s)],r=Math.round(Number(`${n}.${i}`));(a=r>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${r}`).length>s&&(a=a.slice(1),t=`${BigInt(t)+1n}`),a=a.slice(0,s)}else a=a.padEnd(s,"0");return BigInt(`${i?"-":""}${t}${a}`)}}}]);