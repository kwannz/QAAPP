exports.id=4181,exports.ids=[4181],exports.modules={1872:(a,b,c)=>{"use strict";c.d(b,{b:()=>e}),c(29934);class d{setTokens(a,b){this.accessToken=a,this.refreshToken=b}getAccessToken(){return this.accessToken}getRefreshToken(){return this.refreshToken}clearTokens(){this.accessToken=null,this.refreshToken=null}restoreFromStorage(){}constructor(){this.accessToken=null,this.refreshToken=null}}let e=new d},2210:(a,b,c)=>{Promise.resolve().then(c.bind(c,61450))},5276:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,96377,23)),Promise.resolve().then(c.t.bind(c,98752,23)),Promise.resolve().then(c.t.bind(c,55470,23)),Promise.resolve().then(c.t.bind(c,63329,23)),Promise.resolve().then(c.t.bind(c,15157,23)),Promise.resolve().then(c.t.bind(c,74797,23)),Promise.resolve().then(c.t.bind(c,76447,23)),Promise.resolve().then(c.t.bind(c,27216,23)),Promise.resolve().then(c.bind(c,48349))},8545:(a,b,c)=>{"use strict";c.d(b,{OJ:()=>i,nc:()=>j});var d=c(2801),e=c(41060),f=c(1872),g=c(29934);let h=(0,e.createContext)(void 0);function i({children:a}){let[b,i]=(0,e.useState)(null),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!1),r=a=>{},s=()=>{i(null),k(null),m(null),o(!1),q(!1),f.b.clearTokens(),r({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},t=a=>{q(a)},u=async a=>{t(!0);try{let{authApi:b}=await Promise.all([c.e(4297),c.e(5944),c.e(747),c.e(1561)]).then(c.bind(c,61561)),d=await b.login(a);if(d.data?.success&&d.data?.data){let{accessToken:a,refreshToken:b,user:c}=d.data.data,e={id:c.id,email:c.email,role:c.role,kycStatus:c.kycStatus,referralCode:c.referralCode||"",isActive:!0,wallets:c.walletAddress?[{id:"wallet-001",address:c.walletAddress,chainId:1,isPrimary:!0,label:"Primary Wallet"}]:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return i(e),k(a),m(b),o(!0),f.b.setTokens(a,b),r({user:e,accessToken:a,refreshToken:b,isAuthenticated:!0}),{success:!0}}throw Error("Login failed: Invalid response")}catch(a){throw g.vF.error("AuthContext","Login failed",{error:a}),a}finally{t(!1)}},v=async a=>{t(!0);try{let{authApi:b}=await Promise.all([c.e(4297),c.e(5944),c.e(747),c.e(1561)]).then(c.bind(c,61561)),d=await b.register({email:a.email,password:a.password,referralCode:a.referralCode});if(d.data?.success&&d.data?.data){let{accessToken:a,refreshToken:b,user:c}=d.data.data,e={id:c.id,email:c.email,role:c.role,kycStatus:c.kycStatus,referralCode:c.referralCode||"",isActive:!0,wallets:c.walletAddress?[{id:"wallet-001",address:c.walletAddress,chainId:1,isPrimary:!0,label:"Primary Wallet"}]:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return i(e),k(a),m(b),o(!0),f.b.setTokens(a,b),r({user:e,accessToken:a,refreshToken:b,isAuthenticated:!0}),{success:!0}}throw Error("Registration failed: Invalid response")}catch(a){throw g.vF.error("AuthContext","Registration failed",{error:a}),a}finally{t(!1)}};return(0,d.jsx)(h.Provider,{value:{user:b,accessToken:j,refreshToken:l,isAuthenticated:n,isLoading:p,setUser:a=>{i(a),o(!0),r({user:a,accessToken:j,refreshToken:l,isAuthenticated:!0})},setTokens:(a,c)=>{k(a),m(c),o(!0),f.b.setTokens(a,c),r({user:b,accessToken:a,refreshToken:c,isAuthenticated:!0})},clearAuth:s,setLoading:t,login:u,logout:()=>{s()},register:v,updateWallets:a=>{if(b){let c={...b,wallets:a};i(c),r({user:c,accessToken:j,refreshToken:l,isAuthenticated:n})}},setPrimaryWallet:a=>{if(b?.wallets){let c=b.wallets.map(b=>({...b,isPrimary:b.id===a})),d={...b,wallets:c};i(d),r({user:d,accessToken:j,refreshToken:l,isAuthenticated:n})}}},children:a})}function j(){let a=(0,e.useContext)(h);if(void 0===a)throw Error("useAuthStore must be used within an AuthProvider");return a}new Date().toISOString(),new Date().toISOString()},18844:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,6895,23)),Promise.resolve().then(c.t.bind(c,78558,23)),Promise.resolve().then(c.t.bind(c,30776,23)),Promise.resolve().then(c.t.bind(c,35343,23)),Promise.resolve().then(c.t.bind(c,82599,23)),Promise.resolve().then(c.t.bind(c,77519,23)),Promise.resolve().then(c.t.bind(c,47305,23)),Promise.resolve().then(c.t.bind(c,9046,23)),Promise.resolve().then(c.t.bind(c,47679,23))},19657:(a,b,c)=>{"use strict";c.d(b,{Y:()=>f});var d=c(2801),e=c(41060);function f({children:a,fallback:b}){let[c,f]=(0,e.useState)(!1);return c?(0,d.jsx)(d.Fragment,{children:a}):b||null}},29934:(a,b,c)=>{"use strict";c.d(b,{vF:()=>f});var d=function(a){return a[a.VERBOSE=0]="VERBOSE",a[a.DEBUG=1]="DEBUG",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.CRITICAL=5]="CRITICAL",a}({});class e{constructor(a){this.logs=[],this.performanceMarks=new Map,this.config={level:this.getLogLevelFromEnv(),enableConsole:!0,enablePerformanceTracking:!0,maxLogSize:1e3,modules:[],sessionId:this.generateSessionId(),...a},this.info("VerboseLogger","Logger initialized",{config:this.config})}getLogLevelFromEnv(){return 2}generateSessionId(){return`web-${Date.now()}-${Math.random().toString(36).substring(7)}`}shouldLog(a,b){return!(a<this.config.level)&&(!(this.config.modules.length>0)||!!this.config.modules.includes(b))}formatMessage(a,b,c){let e=new Date().toISOString(),f=d[a].padEnd(8),g=b.padEnd(15);return`[${e}] [${f}] [${g}] ${c}`}getConsoleStyle(a){switch(a){case 0:return"color: #888; font-size: 11px;";case 1:return"color: #007ACC; font-weight: normal;";case 2:return"color: #28a745; font-weight: normal;";case 3:return"color: #ffc107; font-weight: bold;";case 4:return"color: #dc3545; font-weight: bold;";case 5:return"color: #ffffff; background-color: #dc3545; font-weight: bold; padding: 2px 4px;";default:return""}}log(a,b,c,d){if(!this.shouldLog(a,b))return;let e={timestamp:new Date,level:a,module:b,message:c,data:d,sessionId:this.config.sessionId,performanceMetrics:this.getPerformanceMetrics()};this.logs.push(e),this.logs.length>this.config.maxLogSize&&(this.logs=this.logs.slice(-this.config.maxLogSize)),this.config.enableConsole,a>=4&&this.sendToMonitoring(e)}getPerformanceMetrics(){this.config.enablePerformanceTracking}sendToMonitoring(a){}verbose(a,b,c){this.log(0,a,b,c)}debug(a,b,c){this.log(1,a,b,c)}info(a,b,c){this.log(2,a,b,c)}warn(a,b,c){this.log(3,a,b,c)}error(a,b,c){this.log(4,a,b,c)}critical(a,b,c){this.log(5,a,b,c)}startTiming(a){this.config.enablePerformanceTracking&&"undefined"!=typeof performance&&(this.performanceMarks.set(a,performance.now()),this.verbose("Performance",`Started timing: ${a}`))}endTiming(a,b="Performance"){if(!this.config.enablePerformanceTracking||"undefined"==typeof performance)return;let c=this.performanceMarks.get(a);if(void 0===c)return void this.warn("Performance",`No start time found for operation: ${a}`);let d=performance.now(),e=d-c;return this.performanceMarks.delete(a),this.info(b,`${a} completed in ${e.toFixed(2)}ms`,{operation:a,duration:e,startTime:c,endTime:d}),e}trackDatabaseOperation(a,b,c){this.verbose("Database",`${a} on ${b}`,c)}trackApiRequest(a,b,c,d){let e=c&&c>=400?4:2;this.log(e,"API",`${a} ${b} - ${c}${d?` (${d.toFixed(2)}ms)`:""}`,{method:a,url:b,statusCode:c,duration:d})}trackUserAction(a,b,c){this.info("UserAction",`${a} in ${b}`,{action:a,component:b,timestamp:Date.now(),...c})}trackError(a,b,c){this.error(b,a.message,{error:a.name,stack:a.stack,context:c})}getLogs(a,b){let c=this.logs;return void 0!==a&&(c=c.filter(b=>b.level>=a)),b&&(c=c.filter(a=>a.module===b)),c}exportLogs(){return JSON.stringify(this.logs,null,2)}clearLogs(){this.logs=[],this.info("VerboseLogger","Logs cleared")}getStats(){let a={totalLogs:this.logs.length,sessionId:this.config.sessionId,logsByLevel:{},logsByModule:{},startTime:this.logs[0]?.timestamp,lastLogTime:this.logs[this.logs.length-1]?.timestamp};return this.logs.forEach(b=>{let c=d[b.level];a.logsByLevel[c]=(a.logsByLevel[c]||0)+1,a.logsByModule[b.module]=(a.logsByModule[b.module]||0)+1}),a}}let f=new e},61450:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>A});var d=c(2801),e=c(85062),f=c(83170),g=c(41060);function h(){let[a,b]=(0,g.useState)(null),[c,e]=(0,g.useState)(!1);return c&&a?(0,d.jsx)(a,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",fontSize:"14px"},success:{iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}):null}c(65306);var i=c(8545),j=c(29934),k=function(a){return a.CONNECTING="CONNECTING",a.CONNECTED="CONNECTED",a.DISCONNECTED="DISCONNECTED",a.ERROR="ERROR",a.RECONNECTING="RECONNECTING",a}({});class l{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectInterval=5e3,this.heartbeatInterval=null,this.statusCallbacks=[],this.messageCallbacks=[],this.accessToken=null,this.url=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws"}connect(a){if(a&&(this.accessToken=a),!this.accessToken)return void j.vF.warn("WebSocket","No access token available for WebSocket connection");this.setStatus("CONNECTING");try{this.ws=new WebSocket(`${this.url}?token=${a}`),this.ws.addEventListener("open",this.handleOpen.bind(this)),this.ws.onmessage=this.handleMessage.bind(this),this.ws.addEventListener("close",this.handleClose.bind(this)),this.ws.onerror=this.handleError.bind(this)}catch(a){j.vF.error("WebSocket","Failed to create WebSocket connection",{error:a}),this.setStatus("ERROR")}}disconnect(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.ws&&(this.ws.close(1e3,"Manual disconnect"),this.ws=null),this.setStatus("DISCONNECTED"),this.reconnectAttempts=0}send(a){if(this.ws&&this.ws.readyState===WebSocket.OPEN){let b={...a,timestamp:Date.now()};this.ws.send(JSON.stringify(b))}else j.vF.warn("WebSocket","WebSocket is not connected. Cannot send message",{message:a})}onStatusChange(a){return this.statusCallbacks.push(a),()=>{let b=this.statusCallbacks.indexOf(a);b>-1&&this.statusCallbacks.splice(b,1)}}onMessage(a){return this.messageCallbacks.push(a),()=>{let b=this.messageCallbacks.indexOf(a);b>-1&&this.messageCallbacks.splice(b,1)}}getStatus(){if(!this.ws)return"DISCONNECTED";switch(this.ws.readyState){case WebSocket.CONNECTING:return"CONNECTING";case WebSocket.OPEN:return"CONNECTED";case WebSocket.CLOSING:case WebSocket.CLOSED:return"DISCONNECTED";default:return"ERROR"}}handleOpen(){j.vF.info("WebSocket","WebSocket connection established"),this.setStatus("CONNECTED"),this.reconnectAttempts=0,this.startHeartbeat(),this.send({type:"auth",payload:{token:this.accessToken}})}handleMessage(a){try{let b=JSON.parse(a.data);if("pong"===b.type)return;for(let a of("notification"===b.type&&this.handleNotification(b.payload),this.messageCallbacks))try{a(b)}catch(a){j.vF.error("WebSocket","Error in message callback",{error:a})}}catch(a){j.vF.error("WebSocket","Failed to parse WebSocket message",{error:a})}}handleClose(a){if(j.vF.info("WebSocket","WebSocket connection closed",{code:a.code,reason:a.reason}),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),1e3===a.code)return void this.setStatus("DISCONNECTED");this.reconnectAttempts<this.maxReconnectAttempts?(this.setStatus("RECONNECTING"),setTimeout(()=>{this.reconnectAttempts++,j.vF.info("WebSocket",`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.connect()},this.reconnectInterval)):(j.vF.error("WebSocket","Max reconnection attempts reached"),this.setStatus("ERROR"))}handleError(a){j.vF.error("WebSocket","WebSocket error",{event:a}),this.setStatus("ERROR")}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&this.send({type:"ping",payload:{timestamp:Date.now()}})},3e4)}setStatus(a){for(let b of this.statusCallbacks)try{b(a)}catch(a){j.vF.error("WebSocket","Error in status callback",{error:a})}}async handleNotification(a){if("toast"===a.type){let b=await null;if(b)switch(a.level){case"success":b.success(a.message);break;case"error":b.error(a.message);break;case"warning":b(a.message,{icon:"⚠️"});break;default:b(a.message)}}}}let m=new l,n=(0,g.createContext)(null);function o({children:a}){let{user:b,isAuthenticated:c}=(0,i.nc)(),[e,f]=(0,g.useState)(k.DISCONNECTED),{notifications:h,unreadCount:j,markAsRead:l,clearAll:o}=function(){let[a,b]=(0,g.useState)([]),[c,d]=(0,g.useState)(0);return{notifications:a,unreadCount:c,markAsRead:(0,g.useCallback)(a=>{m.send({type:"mark_notification_read",payload:{notificationId:a}})},[]),clearAll:(0,g.useCallback)(()=>{m.send({type:"clear_notifications",payload:{}})},[])}}();return(0,d.jsx)(n.Provider,{value:{status:e,sendMessage:a=>{c&&m.send(a)},notifications:h,unreadCount:j,markAsRead:l,clearAll:o},children:a})}function p(){let{status:a}=function(){let a=(0,g.useContext)(n);if(!a)throw Error("useWebSocketContext must be used within a WebSocketProvider");return a}();return null}var q=c(19657);let r={chains:[],connectors:[],transports:{},state:{connections:new Map,chainId:void 0,status:"disconnected"}},s=(0,g.createContext)(r);function t({children:a}){return(0,d.jsx)(s.Provider,{value:r,children:(0,d.jsx)("div",{"data-wagmi-provider":"mock-fallback",children:a})})}let u={isWeb3Enabled:!1,isConnected:!1,address:void 0,chainId:void 0,connect:async()=>{},disconnect:async()=>{}},v=(0,g.createContext)(u);function w({children:a}){return(0,d.jsx)(t,{children:a})}function x({children:a,wagmiConfig:b}){let[c,e]=(0,g.useState)(!1),[f,h]=(0,g.useState)(null),[i,k]=(0,g.useState)(null),[l,m]=(0,g.useState)(null),[n,o]=(0,g.useState)(!1);if(!c)return(0,d.jsx)(w,{children:(0,d.jsx)("div",{"data-wagmi-provider":"loading",children:a})});if(n&&f&&i&&b)try{return(0,d.jsx)(f,{config:b,children:(0,d.jsx)(i,{children:(0,d.jsx)("div",{"data-wagmi-provider":"active",children:a})})})}catch(a){j.vF.error("Web3Provider","Runtime error in Wagmi provider, falling back to mock context",{error:a})}let p=l||"Web3配置未启用";return l?.includes("项目ID")||l?.includes("project"),(0,d.jsx)(w,{children:(0,d.jsx)("div",{"data-wagmi-provider":"fallback",title:p,children:a})})}function y({children:a}){let[b,c]=(0,g.useState)(u),[h,i]=(0,g.useState)(null),[j]=(0,g.useState)(()=>new e.E({defaultOptions:{queries:{staleTime:6e4,retry:(a,b)=>!(b?.message?.includes("user rejected")||b?.message?.includes("User denied"))&&a<3}}}));return(0,d.jsx)(v.Provider,{value:b,children:(0,d.jsx)(f.Ht,{client:j,children:(0,d.jsx)(x,{wagmiConfig:h,children:a})})})}function z({children:a}){return(0,d.jsx)(q.Y,{fallback:(0,d.jsx)(v.Provider,{value:u,children:(0,d.jsx)(f.Ht,{client:new e.E,children:a})}),children:(0,d.jsx)(y,{children:a})})}function A({children:a,cookies:b}){let[c]=(0,g.useState)(()=>new e.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:(a,b)=>!(b instanceof Error&&b.message.includes("401"))&&a<2,retryDelay:a=>Math.min(1e3*2**a,3e4)},mutations:{retry:1}}})),[j,k]=(0,g.useState)(!1);return(0,d.jsx)(f.Ht,{client:c,children:(0,d.jsx)(i.OJ,{children:(0,d.jsx)(z,{children:(0,d.jsxs)(o,{children:[a,(0,d.jsx)(h,{}),(0,d.jsx)(p,{}),!1]})})})})}},62042:(a,b,c)=>{Promise.resolve().then(c.bind(c,96801))},65306:(a,b,c)=>{"use strict";c.d(b,{Iz:()=>m,wZ:()=>l});class d{addEventListener(){}removeEventListener(){}constructor(){this.result=null,this.error=null,this.readyState="done",this.onsuccess=null,this.onerror=null}}class e{close(){}createObjectStore(){return new f}transaction(){return new g}constructor(){this.name="mock-db",this.version=1}}class f{add(){return new d}put(){return new d}get(){return new d}delete(){return new d}clear(){return new d}count(){return new d}createIndex(){return new h}}class g{objectStore(){return new f}abort(){}constructor(){this.oncomplete=null,this.onerror=null,this.onabort=null}}class h{get(){return new d}getAll(){return new d}count(){return new d}}class i{open(a,b){let c=new d;return setTimeout(()=>{c.result=new e,c.onsuccess&&c.onsuccess({target:c})},0),c}deleteDatabase(a){let b=new d;return setTimeout(()=>{b.onsuccess&&b.onsuccess({target:b})},0),b}cmp(){return 0}}class j{get length(){return Object.keys(this.store).length}clear(){this.store={}}getItem(a){return this.store[a]||null}key(a){return Object.keys(this.store)[a]||null}removeItem(a){delete this.store[a]}setItem(a,b){this.store[a]=String(b)}constructor(){this.store={}}}let k={userAgent:"MockNavigator",language:"en-US",languages:["en-US"],onLine:!0,platform:"MockPlatform",cookieEnabled:!0};function l(){{global.indexedDB=new i,global.IDBRequest=d,global.IDBDatabase=e,global.IDBObjectStore=f,global.IDBTransaction=g,global.IDBIndex=h,global.localStorage=new j,global.sessionStorage=new j,global.navigator||Object.defineProperty(global,"navigator",{value:k,writable:!0,configurable:!0}),global.window||Object.defineProperty(global,"window",{value:{localStorage:global.localStorage,sessionStorage:global.sessionStorage,navigator:global.navigator,indexedDB:global.indexedDB,location:{origin:"http://localhost:3002",href:"http://localhost:3002",protocol:"http:",host:"localhost:3002",pathname:"/",search:"",hash:""},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!0,getComputedStyle:()=>({}),matchMedia:()=>({matches:!1,addEventListener:()=>{},removeEventListener:()=>{}})},writable:!0,configurable:!0}),global.document=global.document||{createElement:()=>({setAttribute:()=>{},getAttribute:()=>null,appendChild:()=>{},removeChild:()=>{},addEventListener:()=>{},removeEventListener:()=>{},click:()=>{},focus:()=>{},blur:()=>{},style:{}}),createTextNode:a=>({nodeValue:a,textContent:a,parentNode:null}),getElementById:()=>null,querySelector:()=>null,querySelectorAll:()=>[],addEventListener:()=>{},removeEventListener:()=>{},body:{appendChild:()=>{},removeChild:()=>{},insertBefore:()=>{},replaceChild:()=>{},querySelector:()=>null,querySelectorAll:()=>[],innerHTML:"",textContent:"",style:{},classList:{add:()=>{},remove:()=>{},contains:()=>!1,toggle:()=>!1}},head:{appendChild:()=>{},removeChild:()=>{},insertBefore:()=>{},replaceChild:()=>{},querySelector:()=>null,querySelectorAll:()=>[],innerHTML:"",textContent:"",style:{},classList:{add:()=>{},remove:()=>{},contains:()=>!1,toggle:()=>!1}}},global.MutationObserver=global.MutationObserver||class{constructor(a){}observe(){}disconnect(){}takeRecords(){return[]}},global.PerformanceObserver=global.PerformanceObserver||class{constructor(a){}observe(){}disconnect(){}},global.ResizeObserver=global.ResizeObserver||class{constructor(a){}observe(){}disconnect(){}unobserve(){}},global.SVGElement||(global.SVGElement=global.SVGElement||class{constructor(){this.style={}}setAttribute(){}getAttribute(){return null}removeAttribute(){}appendChild(){}removeChild(){}addEventListener(){}removeEventListener(){}});class a extends global.SVGElement{}class b extends global.SVGElement{}class c extends global.SVGElement{}class l extends global.SVGElement{}global.SVGSVGElement=global.SVGSVGElement||a,global.SVGPathElement=global.SVGPathElement||b,global.SVGCircleElement=global.SVGCircleElement||c,global.SVGRectElement=global.SVGRectElement||l}}function m(){return!1}l()},85453:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g,metadata:()=>f});var d=c(24019);c(95411);var e=c(96801);let f={title:"QA App - Web3 固定收益平台",description:"安全、透明的 Web3 固定收益投资平台"};function g({children:a}){return(0,d.jsx)("html",{lang:"zh-CN",children:(0,d.jsx)("body",{children:(0,d.jsx)(e.Providers,{children:a})})})}},95411:()=>{},96801:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>d});let d=(0,c(1075).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/zhaoleon/Desktop/QAapp/apps/web/app/providers.tsx","Providers")}};