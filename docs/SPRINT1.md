# ğŸš€ Sprint 1: QAåº”ç”¨ç®¡ç†å‘˜å®¡æ ¸ç³»ç»Ÿå®Œå–„è®¡åˆ’

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**Sprintç¼–å·**: Sprint 1  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-27  
**è®¡åˆ’å‘¨æœŸ**: 2å‘¨ (10ä¸ªå·¥ä½œæ—¥)  
**å¼€å§‹æ—¥æœŸ**: 2025-01-28  
**ç»“æŸæ—¥æœŸ**: 2025-02-10  
**Sprintç›®æ ‡**: å®Œæˆæ ¸å¿ƒä¸šåŠ¡å®¡æ ¸åŠŸèƒ½ï¼Œå»ºç«‹å®Œæ•´çš„ç®¡ç†å‘˜æ“ä½œä½“ç³»

---

## ğŸ¯ Sprint ç›®æ ‡ä¸ä»·å€¼

### ä¸šåŠ¡ç›®æ ‡
- ğŸ›¡ï¸ **é£é™©æ§åˆ¶**: å»ºç«‹å®Œæ•´çš„èµ„é‡‘å’Œä¸šåŠ¡å®‰å…¨å®¡æ ¸æœºåˆ¶
- âš¡ **æ•ˆç‡æå‡**: å®ç°æ‰¹é‡æ“ä½œå’Œè‡ªåŠ¨åŒ–å®¡æ ¸æµç¨‹
- ğŸ“Š **åˆè§„ç®¡ç†**: ç¡®ä¿æ‰€æœ‰ä¸šåŠ¡æ“ä½œç¬¦åˆç›‘ç®¡è¦æ±‚
- ğŸ” **é€æ˜ç›‘ç£**: å»ºç«‹å®Œæ•´çš„æ“ä½œå®¡è®¡å’Œè¿½è¸ªä½“ç³»

### æŠ€æœ¯ç›®æ ‡
- ğŸ—ï¸ è¡¥é½5ä¸ªæ ¸å¿ƒç®¡ç†é¡µé¢
- ğŸ”˜ å®ç°30+ä¸ªç®¡ç†æ“ä½œæŒ‰é’®
- ğŸ’¾ å®Œå–„æ•°æ®åº“æ¶æ„è®¾è®¡
- ğŸ” å»ºç«‹å®‰å…¨çš„å®¡æ ¸å·¥ä½œæµ

---

## ğŸ” ç³»ç»Ÿç¼ºå¤±åˆ†ææ€»ç»“

### å½“å‰çŠ¶æ€è¯„ä¼°
- âœ… **å·²å®Œæˆ**: 40% (4/10ä¸ªæ ¸å¿ƒç®¡ç†é¡µé¢)
  - ç®¡ç†å‘˜ä»ªè¡¨æ¿
  - KYCå®¡æ ¸ä¸­å¿ƒ  
  - ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
  - å®¡è®¡æ—¥å¿—ç³»ç»Ÿ

- âŒ **å¾…å®Œæˆ**: 60% (6ä¸ªé¡µé¢ + å…³é”®åŠŸèƒ½)
  - äº§å“å®¡æ ¸é¡µé¢
  - è®¢å•å®¡æ ¸é¡µé¢  
  - æç°å®¡æ ¸é¡µé¢
  - ä»£ç†ç®¡ç†é¡µé¢
  - ç³»ç»Ÿç›‘æ§é¡µé¢
  - ç»´æŠ¤æ§åˆ¶åŠŸèƒ½

### ğŸš¨ å…³é”®é£é™©ç‚¹è¯†åˆ«
1. **æç°å®¡æ ¸ç³»ç»Ÿå®Œå…¨ç¼ºå¤±** - ğŸ”´ æœ€é«˜é£é™©
2. **å¤§é¢è®¢å•æ— äººå·¥å®¡æ ¸** - ğŸŸ¡ ä¸­ç­‰é£é™©  
3. **äº§å“ä¸Šæ¶ç¼ºä¹ç®¡æ§** - ğŸŸ¡ ä¸­ç­‰é£é™©
4. **ç³»ç»Ÿç›‘æ§èƒ½åŠ›ä¸è¶³** - ğŸŸ¢ ä½é£é™©

---

## ğŸ“… Sprint å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µ: äº§å“ä¸è®¢å•å®¡æ ¸ (Day 1-4)

#### Day 1-2: äº§å“å®¡æ ¸ç³»ç»Ÿ
**ç›®æ ‡**: å®ç°äº§å“å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†

**å‰ç«¯å¼€å‘**:
- ğŸ“„ åˆ›å»º `apps/web/app/admin/products/page.tsx`
- ğŸ¨ äº§å“åˆ—è¡¨å±•ç¤ºç•Œé¢
- ğŸ”˜ å®¡æ ¸æ“ä½œæŒ‰é’®ç»„ä»¶
- ğŸ“Š äº§å“çŠ¶æ€ç»Ÿè®¡é¢æ¿
- ğŸ” é«˜çº§ç­›é€‰å’Œæœç´¢åŠŸèƒ½

**æ ¸å¿ƒåŠŸèƒ½**:
- äº§å“ä¸Šæ¶å®¡æ ¸æµç¨‹
- äº§å“ä¿¡æ¯ä¿®æ”¹å®¡æ ¸
- äº§å“ä¸‹æ¶ç®¡ç†
- æ”¶ç›Šç‡è°ƒæ•´å®¡æ ¸
- ä¾›åº”é‡é™åˆ¶è®¾ç½®

**APIç«¯ç‚¹** (å·²å­˜åœ¨ï¼Œéœ€è¦å¢å¼º):
```typescript
âœ… GET /products - è·å–äº§å“åˆ—è¡¨
âœ… POST /products - åˆ›å»ºäº§å“ (ç®¡ç†å‘˜)
âœ… PATCH /products/:id - æ›´æ–°äº§å“ (ç®¡ç†å‘˜) 
âœ… DELETE /products/:id - åˆ é™¤äº§å“ (ç®¡ç†å‘˜)
ğŸ”„ éœ€è¦å¢å¼ºçŠ¶æ€ç®¡ç†å’Œå®¡æ ¸å·¥ä½œæµ
```

#### Day 3-4: è®¢å•å®¡æ ¸ç³»ç»Ÿ
**ç›®æ ‡**: å»ºç«‹è®¢å•é£æ§å’Œå¼‚å¸¸æ£€æµ‹æœºåˆ¶

**å‰ç«¯å¼€å‘**:
- ğŸ“„ åˆ›å»º `apps/web/app/admin/orders/page.tsx`
- ğŸ“‹ è®¢å•åˆ—è¡¨å’Œè¯¦æƒ…å±•ç¤º
- ğŸš¨ å¼‚å¸¸è®¢å•é«˜äº®æ˜¾ç¤º
- ğŸ“¦ æ‰¹é‡å®¡æ ¸æ“ä½œç•Œé¢
- ğŸ’° å¤§é¢è®¢å•ç‰¹æ®Šå¤„ç†

**æ ¸å¿ƒåŠŸèƒ½**:
- å¤§é¢è®¢å•å®¡æ ¸ (>10,000 USDT)
- å¼‚å¸¸è®¢å•æ£€æµ‹å’Œæ ‡è®°
- æ‰¹é‡å®¡æ ¸æ“ä½œ
- è®¢å•å†»ç»“/è§£å†»
- é€€æ¬¾ç”³è¯·å¤„ç†

**é£æ§è§„åˆ™**:
```typescript
// å¤§é¢è®¢å•è§„åˆ™
const LARGE_ORDER_THRESHOLD = 10000; // USDT

// å¼‚å¸¸æ£€æµ‹è§„åˆ™
const ANOMALY_RULES = {
  rapidOrders: 5, // 1å°æ—¶å†…è¶…è¿‡5ç¬”è®¢å•
  unusualAmount: 50000, // å•ç¬”è¶…è¿‡5ä¸‡USDT
  newUserLarge: 5000, // æ–°ç”¨æˆ·å•ç¬”è¶…è¿‡5åƒ
  suspiciousIP: [], // é»‘åå•IP
};
```

### ç¬¬äºŒé˜¶æ®µ: æç°å®¡æ ¸ç³»ç»Ÿ (Day 5-8)

#### Day 5-6: åç«¯åŸºç¡€æ¶æ„
**ç›®æ ‡**: å»ºç«‹å®Œæ•´çš„æç°ç®¡ç†ç³»ç»Ÿ

**æ•°æ®åº“è®¾è®¡**:
```prisma
// æç°çŠ¶æ€æšä¸¾
enum WithdrawalStatus {
  PENDING     // å¾…å®¡æ ¸
  REVIEWING   // å®¡æ ¸ä¸­
  APPROVED    // å·²æ‰¹å‡†
  PROCESSING  // å¤„ç†ä¸­
  COMPLETED   // å·²å®Œæˆ
  REJECTED    // å·²æ‹’ç»
  FAILED      // å¤„ç†å¤±è´¥
}

// æç°è®°å½•è¡¨
model Withdrawal {
  id              String           @id @default(cuid())
  userId          String           @map("user_id")
  amount          Decimal          @db.Decimal(20, 6)
  currency        String           @default("USDT")
  status          WithdrawalStatus @default(PENDING)
  walletAddress   String           @map("wallet_address")
  chainId         Int              @map("chain_id")
  
  // å®¡æ ¸ç›¸å…³
  reviewedBy      String?          @map("reviewed_by")
  reviewedAt      DateTime?        @map("reviewed_at")
  rejectionReason String?          @map("rejection_reason")
  
  // é£æ§ç›¸å…³
  riskScore       Int              @default(0) @map("risk_score")
  riskFlags       Json?            @map("risk_flags")
  autoApproved    Boolean          @default(false) @map("auto_approved")
  
  // äº¤æ˜“ç›¸å…³
  txHash          String?          @map("tx_hash")
  gasPrice        Decimal?         @map("gas_price") @db.Decimal(20, 6)
  gasFee          Decimal?         @map("gas_fee") @db.Decimal(20, 6)
  networkFee      Decimal?         @map("network_fee") @db.Decimal(20, 6)
  
  // æ—¶é—´æˆ³
  requestedAt     DateTime         @default(now()) @map("requested_at")
  approvedAt      DateTime?        @map("approved_at")
  processedAt     DateTime?        @map("processed_at")
  completedAt     DateTime?        @map("completed_at")
  failedAt        DateTime?        @map("failed_at")
  
  // å…ƒæ•°æ®
  metadata        Json?
  notes           String?          @db.Text
  createdAt       DateTime         @default(now()) @map("created_at")
  updatedAt       DateTime         @updatedAt @map("updated_at")

  // å…³ç³»
  user            User             @relation(fields: [userId], references: [id])
  reviewer        User?            @relation("WithdrawalReviewer", fields: [reviewedBy], references: [id])

  @@map("withdrawals")
  @@index([userId, status])
  @@index([status, createdAt])
  @@index([reviewedBy])
  @@index([riskScore])
  @@index([amount])
}
```

**APIå¼€å‘** (å…¨æ–°):
```typescript
// æç°ç®¡ç†æ§åˆ¶å™¨
@Controller('admin/withdrawals')
export class WithdrawalsAdminController {
  
  @Get()
  @Roles(UserRole.ADMIN)
  async getWithdrawals(
    @Query() query: WithdrawalQueryDto
  ): Promise<PaginatedResult<Withdrawal>> {}

  @Get(':id')
  @Roles(UserRole.ADMIN)
  async getWithdrawal(
    @Param('id') id: string
  ): Promise<Withdrawal> {}

  @Patch(':id/approve')
  @Roles(UserRole.ADMIN)
  async approveWithdrawal(
    @Param('id') id: string,
    @Body() approvalDto: ApprovalDto,
    @GetCurrentUser() admin: CurrentUser
  ): Promise<Withdrawal> {}

  @Patch(':id/reject')
  @Roles(UserRole.ADMIN)  
  async rejectWithdrawal(
    @Param('id') id: string,
    @Body() rejectionDto: RejectionDto,
    @GetCurrentUser() admin: CurrentUser
  ): Promise<Withdrawal> {}

  @Post('batch-approve')
  @Roles(UserRole.ADMIN)
  async batchApprove(
    @Body() batchDto: BatchApprovalDto,
    @GetCurrentUser() admin: CurrentUser
  ): Promise<BatchResult> {}

  @Get('statistics')
  @Roles(UserRole.ADMIN)
  async getWithdrawalStats(): Promise<WithdrawalStatsDto> {}
}
```

**é£æ§è§„åˆ™å¼•æ“**:
```typescript
export class WithdrawalRiskEngine {
  
  async evaluateRisk(withdrawal: CreateWithdrawalDto, user: User): Promise<RiskAssessment> {
    let riskScore = 0;
    const riskFlags: string[] = [];

    // 1. é‡‘é¢é£é™©è¯„ä¼°
    if (withdrawal.amount > 100000) {
      riskScore += 50;
      riskFlags.push('LARGE_AMOUNT');
    }

    // 2. é¢‘ç‡é£é™©è¯„ä¼°
    const recentWithdrawals = await this.getRecentWithdrawals(user.id, 24);
    if (recentWithdrawals.length > 3) {
      riskScore += 30;
      riskFlags.push('HIGH_FREQUENCY');
    }

    // 3. æ–°ç”¨æˆ·é£é™©
    if (this.isNewUser(user)) {
      riskScore += 25;
      riskFlags.push('NEW_USER');
    }

    // 4. KYCçŠ¶æ€æ£€æŸ¥
    if (user.kycStatus !== 'APPROVED') {
      riskScore += 40;
      riskFlags.push('NO_KYC');
    }

    // 5. é’±åŒ…åœ°å€é£é™©
    if (await this.isBlacklistedAddress(withdrawal.walletAddress)) {
      riskScore += 80;
      riskFlags.push('BLACKLIST_ADDRESS');
    }

    return {
      riskScore: Math.min(riskScore, 100),
      riskLevel: this.getRiskLevel(riskScore),
      riskFlags,
      autoApprovalAllowed: riskScore < 30,
      requiresManualReview: riskScore >= 30,
    };
  }

  private getRiskLevel(score: number): 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL' {
    if (score >= 80) return 'CRITICAL';
    if (score >= 60) return 'HIGH';
    if (score >= 30) return 'MEDIUM';
    return 'LOW';
  }
}
```

#### Day 7-8: æç°å®¡æ ¸å‰ç«¯
**ç›®æ ‡**: å®ç°ç›´è§‚é«˜æ•ˆçš„å®¡æ ¸ç•Œé¢

**å‰ç«¯å¼€å‘**:
- ğŸ“„ åˆ›å»º `apps/web/app/admin/withdrawals/page.tsx`
- ğŸ“Š æç°ç»Ÿè®¡ä»ªè¡¨æ¿
- ğŸ“‹ ç”³è¯·åˆ—è¡¨å’Œè¯¦æƒ…å±•ç¤º
- ğŸš¨ é£é™©ç­‰çº§å¯è§†åŒ–æ˜¾ç¤º
- ğŸ”˜ æ‰¹é‡å®¡æ ¸æ“ä½œç•Œé¢

**æ ¸å¿ƒåŠŸèƒ½**:
- æç°ç”³è¯·åˆ—è¡¨å±•ç¤º
- é£é™©è¯„åˆ†å¯è§†åŒ–
- å®¡æ ¸æ“ä½œç•Œé¢
- æ‰¹é‡å¤„ç†åŠŸèƒ½
- äº¤æ˜“çŠ¶æ€è·Ÿè¸ª

**UIè®¾è®¡è¦ç‚¹**:
```typescript
// é£é™©ç­‰çº§é¢œè‰²ç¼–ç 
const RISK_COLORS = {
  LOW: 'bg-green-100 text-green-800',
  MEDIUM: 'bg-yellow-100 text-yellow-800', 
  HIGH: 'bg-orange-100 text-orange-800',
  CRITICAL: 'bg-red-100 text-red-800'
};

// çŠ¶æ€å›¾æ ‡æ˜ å°„
const STATUS_ICONS = {
  PENDING: Clock,
  REVIEWING: Eye,
  APPROVED: CheckCircle,
  PROCESSING: RefreshCw,
  COMPLETED: Check,
  REJECTED: XCircle,
  FAILED: AlertTriangle
};
```

### ç¬¬ä¸‰é˜¶æ®µ: ç³»ç»Ÿç›‘æ§åŸºç¡€ (Day 9-10)

#### Day 9-10: ç³»ç»Ÿç›‘æ§ä¸ç»´æŠ¤
**ç›®æ ‡**: å»ºç«‹å®æ—¶ç³»ç»Ÿç›‘æ§å’Œç»´æŠ¤èƒ½åŠ›

**å‰ç«¯å¼€å‘**:
- ğŸ“„ åˆ›å»º `apps/web/app/admin/system/page.tsx`
- ğŸ“Š å®æ—¶ç›‘æ§ä»ªè¡¨æ¿
- ğŸ”„ ç³»ç»Ÿç»´æŠ¤æ¨¡å¼æ§åˆ¶
- ğŸš¨ å‘Šè­¦ç®¡ç†ç•Œé¢
- ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡å±•ç¤º

**æ ¸å¿ƒåŠŸèƒ½**:
- ç³»ç»ŸçŠ¶æ€å®æ—¶ç›‘æ§
- ç»´æŠ¤æ¨¡å¼å¼€å…³æ§åˆ¶
- æœåŠ¡å¥åº·æ£€æŸ¥
- å‘Šè­¦é…ç½®ç®¡ç†
- æ€§èƒ½æŒ‡æ ‡åˆ†æ

**ç›‘æ§æŒ‡æ ‡**:
```typescript
interface SystemMetrics {
  // ç³»ç»Ÿæ€§èƒ½
  cpu: {
    usage: number;        // CPUä½¿ç”¨ç‡
    loadAverage: number[]; // è´Ÿè½½å‡è¡¡
  };
  
  // å†…å­˜ä½¿ç”¨
  memory: {
    used: number;         // å·²ä½¿ç”¨å†…å­˜
    total: number;        // æ€»å†…å­˜
    percentage: number;   // ä½¿ç”¨ç‡
  };
  
  // æ•°æ®åº“è¿æ¥
  database: {
    connections: number;  // è¿æ¥æ•°
    responseTime: number; // å“åº”æ—¶é—´
    status: 'healthy' | 'degraded' | 'down';
  };
  
  // ä¸šåŠ¡æŒ‡æ ‡
  business: {
    activeUsers: number;      // æ´»è·ƒç”¨æˆ·æ•°
    pendingOrders: number;    // å¾…å¤„ç†è®¢å•
    systemErrors: number;     // ç³»ç»Ÿé”™è¯¯æ•°
    apiResponseTime: number;  // APIå¹³å‡å“åº”æ—¶é—´
  };
}
```

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„å®Œå–„

### æ–°å¢è¡¨ç»“æ„

#### 1. æç°è®°å½•è¡¨ (Withdrawals)
```sql
-- æç°çŠ¶æ€æšä¸¾
CREATE TYPE withdrawal_status AS ENUM (
  'PENDING',
  'REVIEWING', 
  'APPROVED',
  'PROCESSING',
  'COMPLETED',
  'REJECTED',
  'FAILED'
);

-- æç°è®°å½•è¡¨
CREATE TABLE withdrawals (
  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id VARCHAR NOT NULL REFERENCES users(id),
  amount DECIMAL(20,6) NOT NULL,
  currency VARCHAR(10) DEFAULT 'USDT',
  status withdrawal_status DEFAULT 'PENDING',
  wallet_address VARCHAR(255) NOT NULL,
  chain_id INTEGER NOT NULL DEFAULT 1,
  
  -- å®¡æ ¸å­—æ®µ
  reviewed_by VARCHAR REFERENCES users(id),
  reviewed_at TIMESTAMP,
  rejection_reason TEXT,
  
  -- é£æ§å­—æ®µ
  risk_score INTEGER DEFAULT 0,
  risk_flags JSONB,
  auto_approved BOOLEAN DEFAULT FALSE,
  
  -- äº¤æ˜“å­—æ®µ
  tx_hash VARCHAR(255),
  gas_price DECIMAL(20,6),
  gas_fee DECIMAL(20,6), 
  network_fee DECIMAL(20,6),
  
  -- æ—¶é—´æˆ³
  requested_at TIMESTAMP DEFAULT NOW(),
  approved_at TIMESTAMP,
  processed_at TIMESTAMP,
  completed_at TIMESTAMP,
  failed_at TIMESTAMP,
  
  -- å…ƒæ•°æ®
  metadata JSONB,
  notes TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_withdrawals_user_status ON withdrawals(user_id, status);
CREATE INDEX idx_withdrawals_status_created ON withdrawals(status, created_at);
CREATE INDEX idx_withdrawals_risk_score ON withdrawals(risk_score);
CREATE INDEX idx_withdrawals_amount ON withdrawals(amount);
```

#### 2. äº§å“å®¡æ ¸è®°å½•è¡¨ (Product Reviews)
```sql
-- äº§å“å®¡æ ¸çŠ¶æ€
CREATE TYPE product_review_status AS ENUM (
  'PENDING',
  'APPROVED', 
  'REJECTED'
);

-- äº§å“å®¡æ ¸è®°å½•è¡¨
CREATE TABLE product_reviews (
  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),
  product_id VARCHAR NOT NULL REFERENCES products(id),
  reviewer_id VARCHAR NOT NULL REFERENCES users(id),
  status product_review_status DEFAULT 'PENDING',
  review_type VARCHAR(50) NOT NULL, -- 'CREATE', 'UPDATE', 'DELETE'
  changes JSONB, -- å˜æ›´å†…å®¹
  comments TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  reviewed_at TIMESTAMP
);
```

#### 3. ç³»ç»Ÿé…ç½®æ‰©å±•
```sql
-- æ‰©å±•ç³»ç»Ÿé…ç½®è¡¨
ALTER TABLE system_configs ADD COLUMN IF NOT EXISTS category VARCHAR(50);
ALTER TABLE system_configs ADD COLUMN IF NOT EXISTS description TEXT;
ALTER TABLE system_configs ADD COLUMN IF NOT EXISTS updated_by VARCHAR REFERENCES users(id);

-- æ’å…¥é»˜è®¤é…ç½®
INSERT INTO system_configs (key, value, category, description) VALUES
('withdrawal.daily_limit', '100000', 'withdrawal', 'æ¯æ—¥æç°é™é¢'),
('withdrawal.auto_approve_limit', '1000', 'withdrawal', 'è‡ªåŠ¨å®¡æ ¸é‡‘é¢ä¸Šé™'),
('order.large_amount_threshold', '10000', 'order', 'å¤§é¢è®¢å•é˜ˆå€¼'),
('system.maintenance_mode', 'false', 'system', 'ç»´æŠ¤æ¨¡å¼å¼€å…³'),
('risk.high_score_threshold', '70', 'risk', 'é«˜é£é™©åˆ†æ•°é˜ˆå€¼');
```

### æ•°æ®è¿ç§»è„šæœ¬

```sql
-- åˆ›å»ºè¿ç§»è„šæœ¬
-- Migration: 001_add_withdrawal_system.sql

BEGIN;

-- åˆ›å»ºæç°ç›¸å…³æšä¸¾å’Œè¡¨
CREATE TYPE withdrawal_status AS ENUM (
  'PENDING', 'REVIEWING', 'APPROVED', 'PROCESSING', 'COMPLETED', 'REJECTED', 'FAILED'
);

-- æ‰§è¡Œè¡¨åˆ›å»ºå’Œç´¢å¼•åˆ›å»º...

-- æ·»åŠ ç”¨æˆ·å…³ç³»
ALTER TABLE users ADD CONSTRAINT fk_users_withdrawals 
  FOREIGN KEY (id) REFERENCES withdrawals(reviewed_by);

COMMIT;
```

---

## ğŸ¨ å‰ç«¯æ¶æ„è®¾è®¡

### ç»„ä»¶å¤ç”¨ç­–ç•¥

#### 1. æ‰©å±•ç°æœ‰AdminActionButtons
```typescript
// æ–°å¢æç°å®¡æ ¸æŒ‰é’®é…ç½®
const withdrawalActions: ActionButtonConfig[] = [
  {
    key: 'approve',
    label: 'æ‰¹å‡†æç°',
    icon: CheckCircle,
    variant: 'default',
    className: 'bg-green-600 hover:bg-green-700',
    confirmMessage: 'ç¡®è®¤æ‰¹å‡†è¯¥æç°ç”³è¯·å—ï¼Ÿèµ„é‡‘å°†è¢«è½¬å‡ºã€‚'
  },
  {
    key: 'reject', 
    label: 'æ‹’ç»æç°',
    icon: XCircle,
    variant: 'destructive',
    confirmMessage: 'ç¡®è®¤æ‹’ç»è¯¥æç°ç”³è¯·å—ï¼Ÿ',
    requiresInput: true,
    inputPlaceholder: 'è¯·è¾“å…¥æ‹’ç»åŸå› ...'
  },
  {
    key: 'review',
    label: 'è½¬äººå·¥å¤æ ¸',
    icon: Eye,
    variant: 'outline',
    requiresInput: true,
    inputPlaceholder: 'è¯·è¾“å…¥å¤æ ¸è¯´æ˜...'
  }
];
```

#### 2. ç»Ÿä¸€çŠ¶æ€ç®¡ç†
```typescript
// æ–°å¢æç°çŠ¶æ€ç®¡ç†
interface WithdrawalState {
  withdrawals: Withdrawal[];
  selectedIds: string[];
  filters: WithdrawalFilters;
  statistics: WithdrawalStats;
  isLoading: boolean;
}

const useWithdrawalStore = create<WithdrawalState>((set, get) => ({
  withdrawals: [],
  selectedIds: [],
  filters: { status: 'all', riskLevel: 'all' },
  statistics: { total: 0, pending: 0, approved: 0 },
  isLoading: false,
  
  // Actions
  setWithdrawals: (withdrawals) => set({ withdrawals }),
  updateWithdrawal: (id, updates) => set((state) => ({
    withdrawals: state.withdrawals.map(w => 
      w.id === id ? { ...w, ...updates } : w
    )
  })),
  // ... other actions
}));
```

#### 3. é€šç”¨ç­›é€‰ç»„ä»¶
```typescript
// å¯å¤ç”¨çš„ç®¡ç†å‘˜ç­›é€‰ç»„ä»¶
export function AdminFilters<T>({
  filters,
  onFilterChange,
  filterConfigs
}: AdminFiltersProps<T>) {
  return (
    <div className="flex flex-wrap gap-3">
      {filterConfigs.map(config => (
        <FilterControl
          key={config.key}
          config={config}
          value={filters[config.key]}
          onChange={(value) => onFilterChange(config.key, value)}
        />
      ))}
    </div>
  );
}
```

### é¡µé¢å¸ƒå±€è§„èŒƒ

#### ç»Ÿä¸€é¡µé¢ç»“æ„
```typescript
// æ ‡å‡†ç®¡ç†å‘˜é¡µé¢æ¨¡æ¿
export default function AdminPageTemplate() {
  return (
    <AdminGuard>
      <AdminLayout>
        <div className="space-y-6">
          {/* é¡µé¢å¤´éƒ¨ */}
          <PageHeader 
            title="é¡µé¢æ ‡é¢˜"
            description="é¡µé¢æè¿°" 
            actions={<HeaderActions />}
          />
          
          {/* ç»Ÿè®¡å¡ç‰‡ */}
          <StatsCards stats={pageStats} />
          
          {/* ç­›é€‰å’Œæœç´¢ */}
          <FiltersSection />
          
          {/* ä¸»è¦å†…å®¹ */}
          <MainContent />
          
          {/* æ¨¡æ€æ¡† */}
          {showModal && <DetailModal />}
        </div>
      </AdminLayout>
    </AdminGuard>
  );
}
```

---

## ğŸ” å®‰å…¨ä¸æƒé™è®¾è®¡

### æƒé™çŸ©é˜µ

```typescript
// æƒé™é…ç½®çŸ©é˜µ
const PERMISSION_MATRIX = {
  // äº§å“ç®¡ç†æƒé™
  'products.view': ['ADMIN', 'AGENT'],
  'products.create': ['ADMIN'],
  'products.update': ['ADMIN'], 
  'products.delete': ['ADMIN'],
  'products.approve': ['ADMIN'],
  
  // è®¢å•ç®¡ç†æƒé™
  'orders.view': ['ADMIN', 'AGENT'],
  'orders.approve': ['ADMIN'],
  'orders.reject': ['ADMIN'],
  'orders.freeze': ['ADMIN'],
  
  // æç°ç®¡ç†æƒé™
  'withdrawals.view': ['ADMIN'],
  'withdrawals.approve': ['ADMIN'],
  'withdrawals.reject': ['ADMIN'],
  'withdrawals.batch_process': ['ADMIN'],
  
  // ç³»ç»Ÿç®¡ç†æƒé™
  'system.monitor': ['ADMIN'],
  'system.maintenance': ['ADMIN'],
  'system.config': ['ADMIN']
};
```

### æ“ä½œå®¡è®¡è®¾è®¡

```typescript
// å®¡è®¡æ—¥å¿—å¢å¼º
interface AuditLogEntry {
  id: string;
  actorId: string;
  actorEmail: string;
  action: string;
  resourceType: string;
  resourceId: string;
  
  // å¢å¼ºå­—æ®µ
  severity: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';
  category: 'AUTH' | 'USER' | 'PRODUCT' | 'ORDER' | 'WITHDRAWAL' | 'SYSTEM';
  beforeState?: any; // æ“ä½œå‰çŠ¶æ€
  afterState?: any;  // æ“ä½œåçŠ¶æ€
  reason?: string;   // æ“ä½œåŸå› 
  
  // ä¸Šä¸‹æ–‡ä¿¡æ¯
  ipAddress: string;
  userAgent: string;
  sessionId: string;
  timestamp: Date;
}

// å…³é”®æ“ä½œè‡ªåŠ¨è®°å½•
const CRITICAL_ACTIONS = [
  'WITHDRAWAL_APPROVED',
  'WITHDRAWAL_REJECTED', 
  'USER_BANNED',
  'PRODUCT_DELETED',
  'SYSTEM_MAINTENANCE_ON',
  'LARGE_ORDER_APPROVED'
];
```

### æ•°æ®è„±æ•è§„åˆ™

```typescript
// æ•æ„Ÿæ•°æ®è„±æ•
export class DataMasking {
  
  static maskWalletAddress(address: string): string {
    if (address.length < 10) return address;
    return `${address.slice(0, 6)}...${address.slice(-4)}`;
  }
  
  static maskEmail(email: string): string {
    const [username, domain] = email.split('@');
    if (username.length <= 2) return email;
    return `${username.slice(0, 2)}***@${domain}`;
  }
  
  static maskIdNumber(idNumber: string): string {
    if (idNumber.length < 8) return idNumber;
    return `${idNumber.slice(0, 4)}****${idNumber.slice(-4)}`;
  }
  
  static maskPhoneNumber(phone: string): string {
    return phone.replace(/(\d{3})\d{4}(\d{4})/, '$1****$2');
  }
}
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•è¦†ç›–

```typescript
// æµ‹è¯•è¦†ç›–è¦æ±‚
const TEST_REQUIREMENTS = {
  coverage: {
    statements: 85,
    branches: 80, 
    functions: 90,
    lines: 85
  },
  
  criticalPaths: [
    'withdrawal approval process',
    'risk score calculation',
    'batch operations',
    'permission validation',
    'audit logging'
  ]
};

// æç°é£æ§æµ‹è¯•ç¤ºä¾‹
describe('WithdrawalRiskEngine', () => {
  test('should flag large amounts as high risk', async () => {
    const withdrawal = { amount: 100000, userId: 'user1' };
    const assessment = await riskEngine.evaluateRisk(withdrawal);
    
    expect(assessment.riskLevel).toBe('HIGH');
    expect(assessment.riskFlags).toContain('LARGE_AMOUNT');
    expect(assessment.autoApprovalAllowed).toBe(false);
  });
  
  test('should allow auto-approval for low-risk withdrawals', async () => {
    const withdrawal = { amount: 500, userId: 'verified-user' };
    const assessment = await riskEngine.evaluateRisk(withdrawal);
    
    expect(assessment.riskLevel).toBe('LOW');
    expect(assessment.autoApprovalAllowed).toBe(true);
  });
});
```

### é›†æˆæµ‹è¯•åœºæ™¯

```typescript
// ç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯
describe('Admin Withdrawal Management E2E', () => {
  test('complete withdrawal approval workflow', async () => {
    // 1. ç”¨æˆ·æäº¤æç°ç”³è¯·
    const withdrawal = await createWithdrawal({
      userId: 'test-user',
      amount: 5000,
      walletAddress: '0x123...'
    });
    
    // 2. ç®¡ç†å‘˜æŸ¥çœ‹å¾…å®¡æ ¸åˆ—è¡¨
    await adminPage.navigateToWithdrawals();
    await adminPage.filterByStatus('PENDING');
    
    // 3. å®¡æ ¸å¹¶æ‰¹å‡†
    await adminPage.selectWithdrawal(withdrawal.id);
    await adminPage.clickApprove();
    await adminPage.confirmApproval();
    
    // 4. éªŒè¯çŠ¶æ€æ›´æ–°
    const updatedWithdrawal = await getWithdrawal(withdrawal.id);
    expect(updatedWithdrawal.status).toBe('APPROVED');
    
    // 5. éªŒè¯å®¡è®¡æ—¥å¿—
    const auditLog = await getLatestAuditLog();
    expect(auditLog.action).toBe('WITHDRAWAL_APPROVED');
  });
});
```

---

## ğŸ“Š å…³é”®æŒ‡æ ‡ä¸ç›‘æ§

### ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§

```typescript
// ä¸šåŠ¡KPIå®šä¹‰
interface BusinessMetrics {
  // å®¡æ ¸æ•ˆç‡æŒ‡æ ‡
  reviewMetrics: {
    avgReviewTime: number;        // å¹³å‡å®¡æ ¸æ—¶é—´
    approvalRate: number;         // å®¡æ ¸é€šè¿‡ç‡
    batchProcessingRate: number;  // æ‰¹é‡å¤„ç†ç‡
  };
  
  // é£æ§æŒ‡æ ‡
  riskMetrics: {
    riskDetectionRate: number;    // é£é™©æ£€æµ‹ç‡
    falsePositiveRate: number;    // è¯¯æŠ¥ç‡
    criticalAlertsCount: number;  // ä¸¥é‡å‘Šè­¦æ•°é‡
  };
  
  // ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
  systemMetrics: {
    apiResponseTime: number;      // APIå“åº”æ—¶é—´
    errorRate: number;           // é”™è¯¯ç‡
    concurrentUsers: number;     // å¹¶å‘ç”¨æˆ·æ•°
  };
}
```

### å‘Šè­¦é…ç½®

```typescript
// å‘Šè­¦è§„åˆ™é…ç½®
const ALERT_RULES = {
  // ä¸šåŠ¡å‘Šè­¦
  business: {
    'HIGH_RISK_WITHDRAWAL': {
      condition: 'withdrawal.riskScore >= 80',
      level: 'CRITICAL',
      message: 'æ£€æµ‹åˆ°é«˜é£é™©æç°ç”³è¯·',
      actions: ['NOTIFY_ADMIN', 'AUTO_FREEZE']
    },
    
    'LARGE_AMOUNT_ORDER': {
      condition: 'order.amount >= 50000',
      level: 'HIGH', 
      message: 'æ£€æµ‹åˆ°å¤§é¢è®¢å•éœ€è¦äººå·¥å®¡æ ¸',
      actions: ['NOTIFY_ADMIN']
    }
  },
  
  // ç³»ç»Ÿå‘Šè­¦
  system: {
    'HIGH_ERROR_RATE': {
      condition: 'errorRate >= 0.05',
      level: 'HIGH',
      message: 'ç³»ç»Ÿé”™è¯¯ç‡è¿‡é«˜',
      actions: ['NOTIFY_DEVOPS']
    }
  }
};
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å‰ç«¯ä¼˜åŒ–

```typescript
// 1. åˆ—è¡¨è™šæ‹ŸåŒ– (å¤§é‡æ•°æ®å±•ç¤º)
import { FixedSizeList as List } from 'react-window';

const VirtualizedAdminList = ({ items, renderItem }) => (
  <List
    height={600}
    itemCount={items.length}
    itemSize={80}
    itemData={items}
  >
    {renderItem}
  </List>
);

// 2. åˆ†é¡µå’Œæ— é™æ»šåŠ¨
const useInfiniteWithdrawals = () => {
  return useInfiniteQuery({
    queryKey: ['withdrawals'],
    queryFn: ({ pageParam = 0 }) => 
      fetchWithdrawals({ page: pageParam, limit: 20 }),
    getNextPageParam: (lastPage) => 
      lastPage.hasMore ? lastPage.page + 1 : undefined,
  });
};

// 3. å®æ—¶æ•°æ®ä¼˜åŒ–
const useRealTimeUpdates = () => {
  useEffect(() => {
    const ws = new WebSocket('/api/admin/realtime');
    ws.onmessage = (event) => {
      const update = JSON.parse(event.data);
      queryClient.setQueryData(['withdrawals'], (oldData) => 
        updateWithdrawalInList(oldData, update)
      );
    };
    
    return () => ws.close();
  }, []);
};
```

### åç«¯ä¼˜åŒ–

```typescript
// 1. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
export class WithdrawalService {
  
  async findWithdrawals(query: WithdrawalQuery): Promise<PaginatedResult<Withdrawal>> {
    // ä½¿ç”¨å¤åˆç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
    const queryBuilder = this.db.withdrawal
      .where('status', query.status)
      .where('riskScore', '>=', query.minRiskScore)
      .orderBy([
        { column: 'createdAt', order: 'desc' },
        { column: 'riskScore', order: 'desc' }
      ])
      .limit(query.limit)
      .offset(query.offset);
    
    // å¹¶è¡ŒæŸ¥è¯¢æ•°æ®å’Œè®¡æ•°
    const [withdrawals, total] = await Promise.all([
      queryBuilder.clone(),
      queryBuilder.clone().count('* as count')
    ]);
    
    return createPaginatedResult(withdrawals, total, query.page, query.limit);
  }
}

// 2. ç¼“å­˜ç­–ç•¥
@Injectable()
export class WithdrawalCacheService {
  
  @CacheKey('withdrawal-stats')
  @CacheTTL(300) // 5åˆ†é’Ÿç¼“å­˜
  async getWithdrawalStats(): Promise<WithdrawalStats> {
    return this.calculateStats();
  }
  
  @CacheEvict('withdrawal-stats')
  async invalidateStatsCache(): Promise<void> {
    // åœ¨æç°çŠ¶æ€å˜æ›´æ—¶æ¸…é™¤ç¼“å­˜
  }
}
```

---

## ğŸš€ éƒ¨ç½²ä¸å‘å¸ƒè®¡åˆ’

### åˆ†é˜¶æ®µå‘å¸ƒ

#### Phase 1: åŸºç¡€åŠŸèƒ½ (Day 1-4)
- âœ… äº§å“å®¡æ ¸é¡µé¢
- âœ… è®¢å•å®¡æ ¸é¡µé¢
- âœ… åŸºç¡€æ“ä½œæŒ‰é’®
- ğŸ§ª åŠŸèƒ½æµ‹è¯•éªŒè¯

#### Phase 2: æ ¸å¿ƒé£æ§ (Day 5-8)  
- âœ… æç°å®¡æ ¸ç³»ç»Ÿ
- âœ… é£æ§è§„åˆ™å¼•æ“
- âœ… æ‰¹é‡æ“ä½œåŠŸèƒ½
- ğŸ§ª å®‰å…¨æµ‹è¯•éªŒè¯

#### Phase 3: ç›‘æ§å®Œå–„ (Day 9-10)
- âœ… ç³»ç»Ÿç›‘æ§é¡µé¢
- âœ… ç»´æŠ¤æ¨¡å¼æ§åˆ¶
- âœ… å‘Šè­¦é…ç½®
- ğŸ§ª æ€§èƒ½æµ‹è¯•éªŒè¯

### ç¯å¢ƒéƒ¨ç½²é¡ºåº

1. **å¼€å‘ç¯å¢ƒ** (Day 1-10)
   - æ—¥å¸¸å¼€å‘å’ŒåŠŸèƒ½è°ƒè¯•
   - å•å…ƒæµ‹è¯•æ‰§è¡Œ

2. **æµ‹è¯•ç¯å¢ƒ** (Day 8-10)
   - é›†æˆæµ‹è¯•éªŒè¯
   - ç”¨æˆ·éªŒæ”¶æµ‹è¯•

3. **é¢„ç”Ÿäº§ç¯å¢ƒ** (Day 11-12)
   - ç”Ÿäº§æ•°æ®æ¨¡æ‹Ÿæµ‹è¯•
   - æ€§èƒ½å‹åŠ›æµ‹è¯•

4. **ç”Ÿäº§ç¯å¢ƒ** (Day 13-14)
   - åˆ†æ‰¹æ¬¡ç°åº¦å‘å¸ƒ
   - å®æ—¶ç›‘æ§éªŒè¯

### å‘å¸ƒæ£€æŸ¥æ¸…å•

#### æŠ€æœ¯æ£€æŸ¥
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡ (è¦†ç›–ç‡ >85%)
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] å®‰å…¨æ‰«æé€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡ (<2så“åº”æ—¶é—´)
- [ ] æ•°æ®åº“è¿ç§»è„šæœ¬éªŒè¯
- [ ] APIæ–‡æ¡£æ›´æ–°å®Œæˆ

#### ä¸šåŠ¡æ£€æŸ¥
- [ ] äº§å“å›¢é˜ŸéªŒæ”¶é€šè¿‡
- [ ] è¿è¥å›¢é˜ŸåŸ¹è®­å®Œæˆ
- [ ] å®¢æœå›¢é˜Ÿå‡†å¤‡å°±ç»ª
- [ ] é£æ§è§„åˆ™é…ç½®æ­£ç¡®
- [ ] ç›‘æ§å‘Šè­¦é…ç½®å®Œæˆ

#### è¿ç»´æ£€æŸ¥
- [ ] éƒ¨ç½²è„šæœ¬éªŒè¯
- [ ] å›æ»šæ–¹æ¡ˆå‡†å¤‡
- [ ] ç›‘æ§ç³»ç»Ÿé…ç½®
- [ ] æ—¥å¿—æ”¶é›†é…ç½®
- [ ] å¤‡ä»½ç­–ç•¥éªŒè¯

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡ä¸éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½å®Œæˆåº¦æŒ‡æ ‡

| åŠŸèƒ½æ¨¡å— | å®Œæˆæ ‡å‡† | éªŒæ”¶æ ‡å‡† |
|---------|---------|---------|
| äº§å“å®¡æ ¸ | 100% åŠŸèƒ½å®ç° | å®¡æ ¸æµç¨‹é¡ºç•…ï¼Œæ“ä½œå“åº”<1s |
| è®¢å•å®¡æ ¸ | 100% åŠŸèƒ½å®ç° | å¼‚å¸¸æ£€æµ‹å‡†ç¡®ç‡>95% |
| æç°å®¡æ ¸ | 100% åŠŸèƒ½å®ç° | é£æ§è§„åˆ™æœ‰æ•ˆæ€§>90% |
| ç³»ç»Ÿç›‘æ§ | 100% åŠŸèƒ½å®ç° | ç›‘æ§æ•°æ®å‡†ç¡®æ€§>98% |

### æ€§èƒ½æŒ‡æ ‡

| æ€§èƒ½æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹æ³• |
|---------|--------|---------|
| é¡µé¢åŠ è½½æ—¶é—´ | <2s | Chrome DevTools |
| APIå“åº”æ—¶é—´ | <500ms | æ¥å£æ€§èƒ½æµ‹è¯• |
| å¹¶å‘å¤„ç†èƒ½åŠ› | 100+ å¹¶å‘ç”¨æˆ· | å‹åŠ›æµ‹è¯• |
| æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ | <100ms | æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ |

### å®‰å…¨æŒ‡æ ‡

| å®‰å…¨æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹æ³• |
|---------|--------|---------|
| æƒé™éªŒè¯è¦†ç›–ç‡ | 100% | ä»£ç å®¡æŸ¥ |
| å®¡è®¡æ—¥å¿—è®°å½•ç‡ | 100% | æ—¥å¿—å®Œæ•´æ€§æ£€æŸ¥ |
| æ•æ„Ÿæ•°æ®è„±æ•ç‡ | 100% | æ•°æ®å®‰å…¨å®¡è®¡ |
| å®‰å…¨æ¼æ´æ•°é‡ | 0ä¸ªä¸¥é‡æ¼æ´ | å®‰å…¨æ‰«æ |

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡

| ä½“éªŒæŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹æ³• |
|---------|--------|---------|
| æ“ä½œæˆåŠŸç‡ | >98% | ç”¨æˆ·æ“ä½œæ—¥å¿—åˆ†æ |
| é”™è¯¯æ¢å¤æ—¶é—´ | <5s | é”™è¯¯å¤„ç†æµ‹è¯• |
| ç•Œé¢å“åº”æ€§ | <100ms | äº¤äº’å“åº”æµ‹è¯• |
| å­¦ä¹ æˆæœ¬ | <30min | ç”¨æˆ·åŸ¹è®­åé¦ˆ |

---

## ğŸ¯ é£é™©è¯†åˆ«ä¸åº”å¯¹

### æŠ€æœ¯é£é™©

| é£é™©ç±»å‹ | é£é™©çº§åˆ« | å½±å“ | åº”å¯¹æªæ–½ |
|---------|---------|------|---------|
| æ•°æ®è¿ç§»å¤±è´¥ | ğŸŸ¡ ä¸­ç­‰ | ç³»ç»Ÿæ— æ³•å¯åŠ¨ | æå‰å¤‡ä»½ï¼Œåˆ†æ­¥è¿ç§»ï¼Œå›æ»šæœºåˆ¶ |
| æ€§èƒ½é—®é¢˜ | ğŸŸ¡ ä¸­ç­‰ | ç”¨æˆ·ä½“éªŒå·® | æ€§èƒ½æµ‹è¯•ï¼Œç¼“å­˜ä¼˜åŒ–ï¼Œç›‘æ§å‘Šè­¦ |
| å®‰å…¨æ¼æ´ | ğŸ”´ é«˜ | æ•°æ®æ³„éœ² | ä»£ç å®¡æŸ¥ï¼Œå®‰å…¨æµ‹è¯•ï¼Œæƒé™æ§åˆ¶ |
| APIå…¼å®¹æ€§ | ğŸŸ¢ ä½ | é›†æˆé—®é¢˜ | ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¥å£æ–‡æ¡£ï¼Œå‘åå…¼å®¹ |

### ä¸šåŠ¡é£é™©

| é£é™©ç±»å‹ | é£é™©çº§åˆ« | å½±å“ | åº”å¯¹æªæ–½ |
|---------|---------|------|---------|
| å®¡æ ¸æµç¨‹ä¸­æ–­ | ğŸ”´ é«˜ | ä¸šåŠ¡åœæ» | å¤‡ç”¨æµç¨‹ï¼Œæ‰‹åŠ¨å¤„ç†ï¼Œå¿«é€Ÿä¿®å¤ |
| é£æ§è§„åˆ™è¯¯åˆ¤ | ğŸŸ¡ ä¸­ç­‰ | ç”¨æˆ·ä½“éªŒå·® | è§„åˆ™è°ƒä¼˜ï¼Œäººå·¥å¤æ ¸ï¼Œåé¦ˆæœºåˆ¶ |
| æ“ä½œåŸ¹è®­ä¸è¶³ | ğŸŸ¡ ä¸­ç­‰ | æ“ä½œå¤±è¯¯ | æå‰åŸ¹è®­ï¼Œæ“ä½œæ‰‹å†Œï¼Œæƒé™æ§åˆ¶ |
| ç³»ç»Ÿè¿‡è½½ | ğŸŸ¢ ä½ | æ€§èƒ½ä¸‹é™ | è´Ÿè½½å‡è¡¡ï¼Œé™æµæœºåˆ¶ï¼Œæ‰©å®¹é¢„æ¡ˆ |

### åº”æ€¥é¢„æ¡ˆ

#### ç³»ç»Ÿæ•…éšœåº”æ€¥é¢„æ¡ˆ
1. **ç«‹å³å“åº”** (0-15åˆ†é’Ÿ)
   - ç›‘æ§å‘Šè­¦è§¦å‘
   - æŠ€æœ¯å›¢é˜Ÿç«‹å³å“åº”
   - ç¡®è®¤æ•…éšœèŒƒå›´å’Œå½±å“

2. **ä¸´æ—¶å¤„ç†** (15-60åˆ†é’Ÿ)  
   - å¯åŠ¨å¤‡ç”¨ç³»ç»Ÿ
   - å¼€å¯æ‰‹åŠ¨å®¡æ ¸æ¨¡å¼
   - é€šçŸ¥ç›¸å…³ä¸šåŠ¡å›¢é˜Ÿ

3. **é—®é¢˜ä¿®å¤** (1-4å°æ—¶)
   - å®šä½é—®é¢˜æ ¹å› 
   - å®æ–½ä¿®å¤æ–¹æ¡ˆ
   - éªŒè¯ç³»ç»Ÿæ¢å¤

4. **æ¢å¤éªŒè¯** (4-24å°æ—¶)
   - å…¨é¢ç³»ç»Ÿæ£€æŸ¥
   - æ•°æ®ä¸€è‡´æ€§éªŒè¯
   - ä¸šåŠ¡æµç¨‹æ¢å¤

---

## ğŸ“š é™„å½•

### A. APIæ¥å£æ–‡æ¡£

#### æç°ç®¡ç†API

```typescript
// GET /api/admin/withdrawals
interface GetWithdrawalsRequest {
  page?: number;
  limit?: number;
  status?: WithdrawalStatus;
  riskLevel?: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';
  startDate?: string;
  endDate?: string;
  userId?: string;
  minAmount?: number;
  maxAmount?: number;
}

interface GetWithdrawalsResponse {
  withdrawals: Withdrawal[];
  total: number;
  page: number;
  limit: number;
  statistics: {
    totalAmount: number;
    pendingCount: number;
    approvedCount: number;
    rejectedCount: number;
    avgRiskScore: number;
  };
}

// POST /api/admin/withdrawals/:id/approve
interface ApproveWithdrawalRequest {
  notes?: string;
  expedite?: boolean; // åŠ æ€¥å¤„ç†
}

interface ApproveWithdrawalResponse {
  success: boolean;
  withdrawal: Withdrawal;
  estimatedProcessingTime: number; // é¢„è®¡å¤„ç†æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
}
```

### B. æ•°æ®åº“è®¾è®¡æ–‡æ¡£

#### è¡¨å…³ç³»å›¾
```
Users â”€â”€â”
        â”œâ”€â”€ Withdrawals
        â”‚   â”œâ”€â”€ reviewed_by â†’ Users
        â”‚   â””â”€â”€ user_id â†’ Users
        â”‚
        â”œâ”€â”€ Orders
        â”‚   â””â”€â”€ user_id â†’ Users  
        â”‚
        â”œâ”€â”€ Products
        â”‚   â””â”€â”€ created_by â†’ Users
        â”‚
        â””â”€â”€ AuditLogs
            â””â”€â”€ actor_id â†’ Users
```

#### ç´¢å¼•ä¼˜åŒ–å»ºè®®
```sql
-- æç°è¡¨é«˜é¢‘æŸ¥è¯¢ä¼˜åŒ–
CREATE INDEX CONCURRENTLY idx_withdrawals_status_created_desc 
ON withdrawals(status, created_at DESC);

CREATE INDEX CONCURRENTLY idx_withdrawals_user_status 
ON withdrawals(user_id, status) WHERE status IN ('PENDING', 'REVIEWING');

CREATE INDEX CONCURRENTLY idx_withdrawals_risk_amount 
ON withdrawals(risk_score DESC, amount DESC) WHERE status = 'PENDING';

-- å®¡è®¡æ—¥å¿—æ€§èƒ½ä¼˜åŒ–
CREATE INDEX CONCURRENTLY idx_audit_logs_category_created 
ON audit_logs(category, created_at DESC);

CREATE INDEX CONCURRENTLY idx_audit_logs_action_resource 
ON audit_logs(action, resource_type, resource_id);
```

### C. éƒ¨ç½²é…ç½®

#### ç¯å¢ƒå˜é‡é…ç½®
```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:pass@localhost:5432/qa_app
REDIS_URL=redis://localhost:6379

# å®‰å…¨é…ç½®
JWT_SECRET=your_jwt_secret_here
ENCRYPTION_KEY=your_encryption_key_here

# ä¸šåŠ¡é…ç½®
WITHDRAWAL_DAILY_LIMIT=100000
AUTO_APPROVE_LIMIT=1000
RISK_SCORE_THRESHOLD=70

# ç›‘æ§é…ç½®
MONITORING_ENABLED=true
ALERT_WEBHOOK_URL=https://hooks.slack.com/...

# å¤–éƒ¨æœåŠ¡
BLOCKCHAIN_RPC_URL=https://mainnet.infura.io/v3/...
NOTIFICATION_SERVICE_URL=https://api.notification.com/
```

#### Dockeré…ç½®
```dockerfile
# Dockerfile.admin
FROM node:18-alpine

WORKDIR /app

# å®‰è£…ä¾èµ–
COPY package*.json ./
RUN npm ci --only=production

# å¤åˆ¶æºç 
COPY . .

# æ„å»ºåº”ç”¨
RUN npm run build:admin

# è®¾ç½®ç¯å¢ƒ
ENV NODE_ENV=production
ENV PORT=3000

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/api/health || exit 1

EXPOSE 3000

CMD ["npm", "run", "start:admin"]
```

### D. ç›‘æ§é…ç½®

#### Prometheusç›‘æ§æŒ‡æ ‡
```yaml
# prometheus.yml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'qa-admin-api'
    static_configs:
      - targets: ['admin-api:3000']
    metrics_path: '/metrics'
    
rule_files:
  - "admin_alerts.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093
```

#### Grafanaä»ªè¡¨æ¿é…ç½®
```json
{
  "dashboard": {
    "title": "QA Admin System Dashboard",
    "panels": [
      {
        "title": "Withdrawal Processing Rate",
        "type": "stat",
        "targets": [
          {
            "expr": "rate(withdrawal_processed_total[5m])"
          }
        ]
      },
      {
        "title": "Risk Score Distribution", 
        "type": "histogram",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, withdrawal_risk_score_bucket)"
          }
        ]
      }
    ]
  }
}
```

---

## ğŸ‰ æ€»ç»“

æœ¬Sprint 1è®¡åˆ’æ—¨åœ¨é€šè¿‡2å‘¨çš„é›†ä¸­å¼€å‘ï¼Œå®ŒæˆQAåº”ç”¨ç®¡ç†å‘˜å®¡æ ¸ç³»ç»Ÿçš„æ ¸å¿ƒç¼ºå¤±åŠŸèƒ½ã€‚é€šè¿‡ç³»ç»Ÿæ€§çš„åˆ†æå’Œè®¾è®¡ï¼Œæˆ‘ä»¬å°†ï¼š

### ğŸ¯ å®ç°ç›®æ ‡
- **è¡¥é½60%çš„åŠŸèƒ½ç¼ºå£** - å®Œæˆ5ä¸ªæ ¸å¿ƒç®¡ç†é¡µé¢
- **å»ºç«‹å®Œæ•´é£æ§ä½“ç³»** - ä»è¢«åŠ¨ç®¡ç†è½¬å‘ä¸»åŠ¨é£æ§
- **æå‡è¿è¥æ•ˆç‡** - æ‰¹é‡æ“ä½œå’Œè‡ªåŠ¨åŒ–å®¡æ ¸
- **ç¡®ä¿ä¸šåŠ¡å®‰å…¨** - å¤šé‡å®¡æ‰¹å’Œå®æ—¶ç›‘æ§

### ğŸ† å…³é”®æˆæœ
- **30+ä¸ªæ ¸å¿ƒç®¡ç†åŠŸèƒ½** - æ¶µç›–æ‰€æœ‰å…³é”®ä¸šåŠ¡åœºæ™¯
- **å®Œæ•´çš„æ•°æ®åº“æ¶æ„** - æ”¯æŒæœªæ¥ä¸šåŠ¡æ‰©å±•
- **ç»Ÿä¸€çš„å®‰å…¨æœºåˆ¶** - æƒé™æ§åˆ¶å’Œå®¡è®¡è¿½è¸ª  
- **ç°ä»£åŒ–ç®¡ç†ç•Œé¢** - æå‡ç®¡ç†å‘˜å·¥ä½œä½“éªŒ

### ğŸš€ ä»·å€¼ä½“ç°
é€šè¿‡æœ¬æ¬¡Sprintçš„å®æ–½ï¼ŒQAåº”ç”¨å°†ä»ä¸€ä¸ªåŠŸèƒ½ä¸å®Œæ•´çš„ç³»ç»Ÿï¼Œå‡çº§ä¸ºå…·æœ‰å®Œå–„ç®¡ç†èƒ½åŠ›çš„ä¼ä¸šçº§é‡‘èå¹³å°ï¼Œä¸ºåç»­ä¸šåŠ¡å‘å±•å¥ å®šåšå®åŸºç¡€ã€‚

**è®©æˆ‘ä»¬å¼€å§‹è¿™ä¸ªæ¿€åŠ¨äººå¿ƒçš„Sprintå§ï¼** ğŸš€